(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2032cdf9"],{"1c2f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{clearable:""},on:{change:t.productBatchingChanged},model:{value:t.productBatchingId,callback:function(e){t.productBatchingId=e},expression:"productBatchingId"}},t._l(t.productBatchings,(function(t){return a("el-option",{key:t.id,attrs:{label:t.stage_product_batch_no,value:t.id}})})),1)},r=[],l=(a("4160"),a("13d5"),a("159b"),a("b775")),i=a("99b1");function o(){return Object(l["a"])({url:i["a"].RubberMaterialUrl,method:"get",params:{all:1}})}var s={props:{isStageProductbatchNoRemove:{type:Boolean,default:!1}},data:function(){return{productBatchings:[],productBatchingId:"",productBatchingById:{}}},created:function(){this.getProductBatchings()},methods:{productBatchingChanged:function(){this.$emit("productBatchingChanged",this.productBatchingById[this.productBatchingId])},getProductBatchings:function(){var t=this;o().then((function(e){var a=e.results;if(a.forEach((function(e){t.productBatchingById[e.id]=e})),t.isStageProductbatchNoRemove){var n={},r=a.reduce((function(t,e){return n[e.stage_product_batch_no]||(n[e.stage_product_batch_no]=t.push(e)),t}),[]);a=r||[]}t.productBatchings=a}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);e["a"]=d.exports},"2efd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"report-batch-style"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",clearable:!0,"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeSearch},model:{value:t.search_date,callback:function(e){t.search_date=e},expression:"search_date"}})],1),a("el-form-item",{attrs:{label:"胶料"}},[a("productNo-select",{attrs:{"is-stage-productbatch-no-remove":!0},on:{productBatchingChanged:t.productBatchingChanged}})],1),a("el-form-item",{attrs:{label:"机台"}},[a("selectEquip",{attrs:{equip_no_props:t.getParams.equip_no},on:{"update:equip_no_props":function(e){return t.$set(t.getParams,"equip_no",e)},changeSearch:t.changeSearch}})],1),a("el-form-item",{attrs:{label:"班次"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.changeSearch},model:{value:t.getParams.classes,callback:function(e){t.$set(t.getParams,"classes",e)},expression:"getParams.classes"}},t._l(t.classesList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.global_name,value:t.global_name}})})),1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"No"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"作业时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.end_time.split(" ")[0]))]}}])}),a("el-table-column",{attrs:{prop:"classes",label:"班次"}}),a("el-table-column",{attrs:{prop:"class_group",label:"班组"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.class_group?e.row.class_group:"--"))]}}])}),a("el-table-column",{attrs:{label:"生产时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.end_time.split(" ")[1]))]}}])}),a("el-table-column",{attrs:{prop:"product_no",label:"胶料编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{color:"#1989fa",cursor:"pointer"},on:{click:function(a){return t.clickProductNo(e.row)}}},[t._v(t._s(e.row.product_no))])]}}])}),a("el-table-column",{attrs:{prop:"equip_no",label:"BATNO"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.begin_trains)+"--"+t._s(e.row.end_trains))]}}])}),a("el-table-column",{attrs:{prop:"actual_weight",label:"生产重量"}}),a("el-table-column",{attrs:{prop:"equip_no",width:"150",label:"有效时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.end_time)+" -- "+t._s(t.setEndTime(e.row.end_time)))]}}])}),a("el-table-column",{attrs:{prop:"lot_no",label:"LOT NO"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.lot_no?e.row.lot_no:"--"))]}}])}),a("el-table-column",{attrs:{prop:"operation_user",label:"作业者"}})],1),a("page",{attrs:{total:t.total},on:{currentChange:t.currentChange}}),a("el-dialog",{attrs:{title:"胶料产出反馈",visible:t.dialogVisibleRubber,width:"900px"},on:{"update:visible":function(e){t.dialogVisibleRubber=e}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"胶料区分: "}},[t._v(t._s(t.palletFeedObj.hasOwnProperty("stage")?t.palletFeedObj.stage:"--"))]),a("el-form-item",{attrs:{label:"胶料编码: "}},[t._v(t._s(t.palletFeedObj.product_no))]),a("el-form-item",{attrs:{label:"班次: "}},[t._v(t._s(t.palletFeedObj.classes))]),a("el-form-item",{attrs:{label:"机台: "}},[t._v(t._s(t.palletFeedObj.equip_no))])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.palletFeedList,border:""}},[a("el-table-column",{attrs:{prop:"lot_no",label:"LOT"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.lot_no||"--"))]}}])}),a("el-table-column",{attrs:{prop:"product_no",label:"胶料编码"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{label:"BAT"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{color:"#1989fa",cursor:"pointer"},on:{click:function(a){return t.clickBAT(e.row)}}},[t._v(t._s(e.row.begin_trains)+"--"+t._s(e.row.end_trains))])]}}])}),a("el-table-column",{attrs:{prop:"actual_weight",label:"生产重量"}}),a("el-table-column",{attrs:{label:"生产时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.end_time.split(" ")[1]))]}}])}),a("el-table-column",{attrs:{prop:"classes",label:"班次"}}),a("el-table-column",{attrs:{prop:"operation_user",label:"作业者"}})],1)],1),a("el-dialog",{attrs:{title:"BAT查询",visible:t.dialogVisibleBAT,width:"900px"},on:{"update:visible":function(e){t.dialogVisibleBAT=e}}},[a("div",{staticStyle:{position:"relative"}},[a("el-form",{staticStyle:{"margin-right":"100px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"胶料区分: "}},[t._v(t._s(t.BATObj.stage))]),a("el-form-item",{attrs:{label:"胶料编码: "}},[t._v(t._s(t.BATObj.product_no))]),a("el-form-item",{attrs:{label:"班次: "}},[t._v(t._s(t.BATObj.classes))]),a("el-form-item",{attrs:{label:"机台: "}},[t._v(t._s(t.BATObj.equip_no))]),a("el-form-item",{attrs:{label:"车次: "}},[t._v(t._s(t.BATObj.begin_trains)+" -- "+t._s(t.BATObj.end_trains))])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.BATList,border:""}},[a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{prop:"name",label:"日期",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.end_time.split(" ")[0]))]}}])}),a("el-table-column",{attrs:{prop:"classes",label:"班次"}}),a("el-table-column",{attrs:{prop:"product_no",label:"胶料编码"}}),a("el-table-column",{attrs:{prop:"actual_trains",label:"车次"}}),a("el-table-column",{attrs:{prop:"actual_weight",label:"胶"}}),a("el-table-column",{attrs:{label:"时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.begin_time)+" -- "+t._s(e.row.end_time))]}}])}),a("el-table-column",{attrs:{prop:"equip_status.temperature",label:"温度"}}),a("el-table-column",{attrs:{prop:"equip_status.energy",label:"电量"}}),a("el-table-column",{attrs:{prop:"equip_status.rpm",label:"RPM"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.clickView(e.row,e.$index)}}},[t._v("查看图表")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"分析图表",modal:!0,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"900px",visible:t.dialogVisibleGraph},on:{"update:visible":function(e){t.dialogVisibleGraph=e}}},[a("ve-line",{attrs:{height:"500px",data:t.chartData,settings:t.chartSettings,"after-set-option":t.afterSetOption}})],1)],1)},r=[],l=(a("4160"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("5530")),i=a("ed08"),o=a("3e51"),s=a("4090"),c=a("1c2f"),u=a("316c"),d=a("2f62"),p={components:{page:o["a"],selectEquip:s["a"],ProductNoSelect:c["a"]},data:function(){return this.chartSettings={labelMap:{created_date_date:"时间",power:"功率",temperature:"温度",energy:"能量",pressure:"压力",rpm:"转速"},axisSite:{right:["temperature","rpm","energy","pressure"]}},{loading:!0,loadingTable:!1,tableData:[],search_date:[],getParams:{page:1,equip_no:null,product_no:null,plan_classes_uid:null,st:"",et:""},normsList:[],produceList:[],groupList:[],dialogVisibleRubber:!1,tableDataRubber:[],tableDataBAT:[],dialogVisibleBAT:!1,glueList:[],classesList:[],fixedTime:864e5,palletFeedObj:{},palletFeedList:[],BATObj:{},BATList:[],dialogVisibleGraph:!1,chartData:{columns:["created_date_date","power","temperature","energy","pressure","rpm"],rows:[]},total:0,options:{title:{show:!0,text:"主标题",textAlign:"left"},yAxis:[{min:0,max:2500,splitNumber:5,interval:500},{min:0,max:200,splitNumber:5,interval:40}],toolbox:{itemSize:20,itemGap:30,right:50,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{name:"",pixelRatio:2}}}}}},computed:Object(l["a"])({},Object(d["b"])(["permission"])),created:function(){this.getList(),this.getGlueList(),this.getClassesList();var t=Object(i["a"])();this.getParams.st=t+" 00:00:00",this.getParams.et=t+" 23:59:59",this.search_date=[this.getParams.st,this.getParams.et]},methods:{getList:function(){var t=this,e=this;Object(u["h"])("get",{params:e.getParams}).then((function(t){e.tableData=t.results||[],e.total=t.count||0,e.loading=!1,e.loadingTable=!1})).catch((function(e){t.loading=!1,t.loadingTable=!1}))},getGlueList:function(){var t=this;Object(u["i"])("get",{params:{all:1}}).then((function(e){var a=e.results||[];t.glueList=a})).catch((function(t){}))},getClassesList:function(){var t=this;Object(u["a"])("get",{params:{class_name:"班次"}}).then((function(e){t.classesList=e.results||[]})).catch((function(t){}))},clickPrint:function(){},clickExcel:function(){},clickProductNo:function(t){this.dialogVisibleRubber=!0,this.palletFeedObj=t,this.getRubberCoding()},getRubberCoding:function(){var t=this;Object(u["f"])("get",{params:{product_no:t.palletFeedObj.product_no,plan_classes_uid:t.palletFeedObj.plan_classes_uid,equip_no:t.palletFeedObj.equip_no}}).then((function(e){t.palletFeedList=e.results||[]})).catch((function(t){}))},clickBAT:function(t){this.dialogVisibleBAT=!0,this.BATObj=t,this.getBATList()},getBATList:function(){var t=this;Object(u["g"])("get",{params:{plan_classes_uid:t.BATObj.plan_classes_uid,equip_no:t.BATObj.equip_no,actual_trains:t.BATObj.begin_trains+","+t.BATObj.end_trains}}).then((function(e){t.BATList=e.results||[]})).catch((function(t){}))},clickView:function(t){this.dialogVisibleGraph=!0,this.getEchartsList(t)},getEchartsList:function(t){var e=this;Object(u["c"])("get",{params:{product_no:t.product_no,plan_classes_uid:t.plan_classes_uid,equip_no:t.equip_no,current_trains:t.actual_trains}}).then((function(a){var n=a;n.forEach((function(t){t.created_date_date=t.product_time.split(" ")[1]?t.product_time.split(" ")[1]:t.product_time})),e.chartData.rows=n,e.options.title.text=e.chartData.rows.length>0&&e.chartData.rows[0].hasOwnProperty("product_time")?e.chartData.rows[0].product_time.split(" ")[0]:"",e.options.toolbox.feature.saveAsImage.name="工艺曲线_"+(t.equip_no||"")+"-"+(t.product_no||"")+"-"+(t.begin_time||"")})).catch((function(){}))},afterSetOption:function(t){t.setOption(this.options)},productBatchingChanged:function(t){this.getParams.product_no=t?t.stage_product_batch_no:"",this.getParams.page=1,this.loadingTable=!0,this.getList()},changeSearch:function(){this.loadingTable=!0,this.search_date&&(this.getParams.st=this.search_date[0],this.getParams.et=this.search_date[1]),this.getParams.page=1,this.getList()},setEndTime:function(t){var e=new Date(t).getTime(),a=e+this.fixedTime;return Object(i["a"])(a,!0)},opens:function(){this.$nextTick((function(){}))},currentChange:function(t){this.getParams.page=t,this.getList()}}},b=p,h=(a("3bca"),a("2877")),_=Object(h["a"])(b,n,r,!1,null,"2accf0e6",null);e["default"]=_.exports},"316c":function(t,e,a){"use strict";a.d(e,"h",(function(){return l})),a.d(e,"i",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"c",(function(){return p})),a.d(e,"k",(function(){return b})),a.d(e,"e",(function(){return h})),a.d(e,"b",(function(){return _}));var n=a("b775"),r=a("99b1");function l(t,e){var a={url:r["a"].ReportBatchUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function i(t,e){var a={url:r["a"].RubberMaterialUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function o(t,e){var a={url:r["a"].EquipUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function s(t,e){var a={url:r["a"].ClassesListUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function c(t,e){var a={url:r["a"].ProductionPalletFeedBacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function u(t,e){var a={url:r["a"].ProductionTrainsFeedbacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function d(t,e){var a={url:r["a"].TrainsFeedbacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function p(t,e){var a={url:r["a"].EchartsListUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function b(t,e){var a={url:r["a"].WeighInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function h(t,e){var a={url:r["a"].MixerInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function _(t,e){var a={url:r["a"].CurveInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}},"3bca":function(t,e,a){"use strict";var n=a("dbc7"),r=a.n(n);r.a},"3e51":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-pagination",{attrs:{layout:"total,prev,pager,next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.currentChange}})],1)},r=[],l=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10}},data:function(){return{currentPage:1}},methods:{currentChange:function(t){this.$emit("currentChange",t)}}}),i=l,o=a("2877"),s=Object(o["a"])(i,n,r,!1,null,null,null);e["a"]=s.exports},4090:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{clearable:"",placeholder:"请选择机台"},on:{change:t.changeSearch},model:{value:t._equip_no,callback:function(e){t._equip_no=e},expression:"_equip_no"}},t._l(t.machineList,(function(t){return a("el-option",{key:t.equip_no,attrs:{label:t.equip_no,value:t.equip_no}})})),1)],1)},r=[],l=a("316c"),i={props:{equip_no_props:{type:String,default:null}},data:function(){return{machineList:[]}},computed:{_equip_no:{get:function(){return this.equip_no_props},set:function(t){this.$emit("update:equip_no_props",t)}}},created:function(){this.getMachineList()},methods:{getMachineList:function(){var t=this;Object(l["d"])("get",{params:{all:1,category_name:"密炼设备"}}).then((function(e){t.machineList=e.results||[]})).catch((function(t){}))},changeSearch:function(t){this.$emit("changeSearch",t)}}},o=i,s=a("2877"),c=Object(s["a"])(o,n,r,!1,null,null,null);e["a"]=c.exports},dbc7:function(t,e,a){},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("4160"),a("c975"),a("a9e3"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("1276"),a("159b"),a("53ca");function n(t,e,a){var n=t?new Date(t):new Date,l={y:n.getFullYear(),m:r(n.getMonth()+1),d:r(n.getDate()),h:r(n.getHours()),i:r(n.getMinutes()),s:r(n.getSeconds()),a:r(n.getDay())};return e?l.y+"-"+l.m+"-"+l.d+" "+l.h+":"+l.i+":"+l.s:a&&"continuation"===a?l.y+l.m+l.d+l.h+l.i+l.s:l.y+"-"+l.m+"-"+l.d}function r(t){return t=Number(t),t<10?"0"+t:t}}}]);