(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f364da88"],{1977:function(t,e,a){},"6f3c":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-header el-table--border"},[t._v("MES系统")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.mesSystemTableData,border:""}},[a("el-table-column",{attrs:{prop:"system_name",label:"MES系统",width:"130"}}),a("el-table-column",{attrs:{prop:"link_address",label:"IP地址",width:"250"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"180"}}),a("el-table-column",{attrs:{label:"操作(上辅机系统是否联网运行)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleMesConnect(e.$index,e.row)}}},[t._v("联网")]),a("el-button",{attrs:{size:"mini",type:"info"}},[t._v("独立")])]}}])})],1),a("div",{staticClass:"table-header el-table--border"},[t._v("上辅机工作站")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.auxiliaryTableData,border:""}},[a("el-table-column",{attrs:{prop:"system_name",label:"上辅机工作站",width:"130"}}),a("el-table-column",{attrs:{prop:"link_address",label:"IP地址",width:"250"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"180"}}),a("el-table-column",{attrs:{label:"操作(上辅机系统是否联网运行)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleAuConnect(e.$index,e.row)}}},[t._v("联网")]),a("el-button",{attrs:{size:"mini",type:"info"}},[t._v("独立")])]}}])})],1),a("mes-to-au-dialog",{ref:"mesToAuDialog"}),a("au-to-mes-dialog",{ref:"auToMesDialog"})],1)},n=[],o=(a("4160"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"80%",title:"MES系统与上辅机群控系统的数据同步",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"MES系统"}},[a("el-table-column",{attrs:{prop:"mes_data_type",label:"数据类别"}}),a("el-table-column",{attrs:{prop:"mes_data_no",label:"数据编号"}})],1),a("el-table-column",{attrs:{label:"同步"}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-checkbox",[t._v("全选")])]}},{key:"default",fn:function(t){return[a("el-checkbox")]}}])}),a("el-table-column",{attrs:{prop:"sync_data_no",label:"数据编号"}}),a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-checkbox",[t._v("全选")])]}},{key:"default",fn:function(t){return[a("el-checkbox")]}}])})],1),a("el-table-column",{attrs:{label:"上辅机群控系统"}},[a("el-table-column",{attrs:{prop:"au_data_type",label:"数据类别"}}),a("el-table-column",{attrs:{prop:"au_data_no",label:"数据编号"}})],1)],1)],1)}),s=[],i=(a("b64b"),a("b775")),r=a("bc3a"),u=a.n(r),c=u.a.create({baseURL:"/mes",timeout:1e10}),b=c,d=a("99b1");function h(){return Object(i["a"])({url:d["a"].SynchronizationUrl,method:"get"})}function m(t){return b({url:d["a"].SynchronizationUrl,method:"get",params:{lost_time:t}})}var f={data:function(){return{tableData:[],dialogVisible:!1,synchronizationData:null,lost_time:null,plan_classes_uid_by_row:{}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.tableData=[],h().then((function(e){t.synchronizationData=e;for(var a=t.synchronizationData["Upper auxiliary machine group control system"],l=0,n=Object.keys(a);l<n.length;l++){var o=n[l];if("lost_time"!==o)for(var s=0,i=Object.keys(a[o]);s<i.length;s++)for(var r=i[s],u=0,c=Object.keys(a[o][r]);u<c.length;u++){var b=c[u],d={au_data_type:o,au_data_no:b};t.tableData.push(d),t.plan_classes_uid_by_row[b]=d}else t.lost_time=a[o]}t.lost_time&&m(t.lost_time).then((function(e){console.log(e);for(var a=e.data["MES系统"],l=0,n=Object.keys(a);l<n.length;l++){var o=n[l];if("lost_time"!==o)for(var s=0,i=Object.keys(a[o]);s<i.length;s++)for(var r=i[s],u=0,c=Object.keys(a[o][r]);u<c.length;u++){var b=c[u],d=t.plan_classes_uid_by_row[b];d||(d={},t.tableData.push(d),t.plan_classes_uid_by_row[b]=d),d["mes_data_type"]=o,d["mes_data_no"]=b}}}))}))},show:function(){this.dialogVisible=!0}}},_=f,p=a("2877"),y=Object(p["a"])(_,o,s,!1,null,null,null),v=y.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"80%",title:"上辅机群控系统与工作站的数据同步",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-select",{attrs:{placeholder:"当前机台"}}),a("el-button",{staticStyle:{float:"right"}},[t._v("同步")])],1),a("el-table",[a("el-table-column",{attrs:{label:"上辅机群控"}},[a("el-table-column",{attrs:{label:"数据类别"}}),a("el-table-column",{attrs:{label:"数据类别"}})],1),a("el-table-column",{attrs:{label:"同步"}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-checkbox",[t._v("全选")])]}},{key:"default",fn:function(t){return[a("el-checkbox")]}}])}),a("el-table-column",{attrs:{prop:"sync_data_no",label:"数据编号"}}),a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-checkbox",[t._v("全选")])]}},{key:"default",fn:function(t){return[a("el-checkbox")]}}])})],1),a("el-table-column",{attrs:{label:"上辅机工作站"}},[a("el-table-column",{attrs:{label:"数据类别"}}),a("el-table-column",{attrs:{label:"数据编号"}})],1)],1)],1)},k=[],w={data:function(){return{dialogVisible:!1}},methods:{show:function(){this.dialogVisible=!0}}},S=w,D=Object(p["a"])(S,g,k,!1,null,"225fc318",null),x=D.exports;function M(){return Object(i["a"])({url:d["a"].ChildSystemsUrl,method:"get",params:{all:1}})}var T={components:{MesToAuDialog:v,AuToMesDialog:x},data:function(){return{mesSystemTableData:[],auxiliaryTableData:[]}},created:function(){this.getChildSystems()},methods:{getChildSystems:function(){var t=this;M().then((function(e){e.results.forEach((function(e){"MES"===e.system_name?t.mesSystemTableData.push(e):t.auxiliaryTableData.push(e)}))}))},handleMesConnect:function(t,e){this.$refs.mesToAuDialog.show()},handleAuConnect:function(t,e){this.$refs.auToMesDialog.show()}}},j=T,O=(a("b777"),Object(p["a"])(j,l,n,!1,null,"48563320",null));e["default"]=O.exports},b777:function(t,e,a){"use strict";var l=a("1977"),n=a.n(l);n.a}}]);