(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35766322"],{1577:function(t,e,a){"use strict";e["a"]={data:function(){var t=this;return this.toolbox={feature:{dataZoom:{show:!0},restore:{}}},this.extend={series:{smooth:!1}},this.colors=["#FF40A3","#B2670A","#3B3834","#196D26","#2E77B4"],this.chartSettings={labelMap:{created_date_date:"时间",temperature:"温度",power:"功率",energy:"能量",rpm:"转速",pressure:"压力"},axisSite:{right:["temperature","rpm","energy","pressure"]}},{chartData:{columns:["created_date_date","temperature","power","energy","rpm","pressure"],rows:[]},options:{backgroundColor:"#fff",title:{show:!0,text:"主标题",textAlign:"left"},grid:{y:50},legend:{left:120},yAxis:[{min:0,max:2500,splitNumber:5,interval:500},{min:0,max:200,splitNumber:5,interval:40}],toolbox:{itemSize:20,itemGap:30,right:0,feature:{saveAsImage:{name:"",pixelRatio:2},myTool1:{show:!0,title:"放大查看",icon:"path://M419.61244445 837.17688889c98.53155555 0 191.71555555-33.90577778 266.46755555-96.14222222l269.08444445 269.08444444c7.50933333 7.50933333 17.408 11.264 27.30666666 11.264s19.79733333-3.75466667 27.30666667-11.264c15.13244445-15.13244445 15.13244445-39.59466667 0-54.61333333L740.80711111 686.30755555c136.07822222-163.84 127.43111111-408.12088889-26.05511111-561.6071111-78.848-78.73422222-183.63733333-122.19733333-295.13955555-122.19733334-111.50222222 0-216.29155555 43.46311111-295.13955556 122.19733334-162.70222222 162.70222222-162.70222222 427.46311111 0 590.16533333 78.96177778 78.96177778 183.75111111 122.31111111 295.13955556 122.31111111zM179.2 179.42755555c64.28444445-64.17066667 149.61777778-99.55555555 240.41244445-99.55555555 90.79466667 0 176.24177778 35.38488889 240.41244444 99.55555555 132.55111111 132.55111111 132.55111111 348.38755555 0 480.93866667-64.28444445 64.17066667-149.61777778 99.55555555-240.41244444 99.55555556S243.48444445 724.53688889 179.2 660.36622222C46.64888889 527.70133333 46.64888889 311.97866667 179.2 179.42755555z",onclick:function(){t.dialogVisible=!0,t.options.toolbox.feature.myTool1.show=!1}}}}}}}}},"1c2f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{clearable:"",filterable:"",loading:t.loading},on:{change:t.productBatchingChanged,"visible-change":t.visibleChange},model:{value:t.productBatchingId,callback:function(e){t.productBatchingId=e},expression:"productBatchingId"}},t._l(t.productBatchings,(function(t){return a("el-option",{key:t.id,attrs:{label:t.stage_product_batch_no,value:t.id}})})),1)},r=[],i=(a("4de4"),a("4160"),a("13d5"),a("159b"),a("b775")),o=a("99b1");function s(){return Object(i["a"])({url:o["a"].RubberMaterialUrl,method:"get",params:{all:1}})}var c={props:{isStageProductbatchNoRemove:{type:Boolean,default:!1},makeUseBatch:{type:Boolean,default:!1}},data:function(){return{productBatchings:[],productBatchingId:"",productBatchingById:{},loading:!0}},created:function(){},methods:{productBatchingChanged:function(){this.$emit("productBatchingChanged",this.productBatchingById[this.productBatchingId])},visibleChange:function(t){t&&0===this.productBatchings.length&&this.getProductBatchings()},getProductBatchings:function(){var t=this;s().then((function(e){var a=e.results;if(a.forEach((function(e){t.productBatchingById[e.id]=e})),t.isStageProductbatchNoRemove){var n={},r=a.reduce((function(t,e){return n[e.stage_product_batch_no]||(n[e.stage_product_batch_no]=t.push(e)),t}),[]);a=r||[]}if(t.loading=!1,t.makeUseBatch){var i=[];return i=a.filter((function(t){return 4===t.used_type||6===t.used_type})),void(t.productBatchings=i)}t.productBatchings=a}))}}},l=c,u=a("2877"),d=Object(u["a"])(l,n,r,!1,null,null,null);e["a"]=d.exports},"27ae":function(t,e,a){"use strict";var n=a("f177"),r=a.n(n);r.a},"316c":function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"j",(function(){return _})),a.d(e,"e",(function(){return p})),a.d(e,"b",(function(){return g}));var n=a("b775"),r=a("99b1");function i(t,e){var a={url:r["a"].ReportBatchUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function o(t,e){var a={url:r["a"].EquipUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function s(t,e){var a={url:r["a"].ClassesListUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function c(t,e){var a={url:r["a"].ProductionPalletFeedBacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function l(t,e){var a={url:r["a"].ProductionTrainsFeedbacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function u(t,e){var a={url:r["a"].TrainsFeedbacksUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function d(t,e){var a={url:r["a"].EchartsListUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function _(t,e){var a={url:r["a"].WeighInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function p(t,e){var a={url:r["a"].MixerInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}function g(t,e){var a={url:r["a"].CurveInformationUrl,method:t};return Object.assign(a,e),Object(n["a"])(a)}},"3e51":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-pagination",{attrs:{layout:"total,prev,pager,next",total:t.total,"page-size":t.pageSize,"current-page":t._currentPage},on:{"update:currentPage":function(e){t._currentPage=e},"update:current-page":function(e){t._currentPage=e},"current-change":t.currentChange}})],1)},r=[],i=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data:function(){return{}},computed:{_currentPage:{get:function(){return this.currentPage},set:function(){return 1}}},methods:{currentChange:function(t){this.$emit("currentChange",t)}}}),o=i,s=a("2877"),c=Object(s["a"])(o,n,r,!1,null,null,null);e["a"]=c.exports},4090:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{clearable:!t.isCreated,placeholder:"请选择机台"},on:{change:t.changeSearch,"visible-change":t.visibleChange},model:{value:t._equip_no,callback:function(e){t._equip_no=e},expression:"_equip_no"}},t._l(t.machineList,(function(t){return a("el-option",{key:t.equip_no,attrs:{label:t.equip_no,value:t.equip_no}})})),1)],1)},r=[],i=a("316c"),o={props:{equip_no_props:{type:String,default:null},isCreated:{type:Boolean,default:!1}},data:function(){return{machineList:[]}},computed:{_equip_no:{get:function(){return this.equip_no_props},set:function(t){this.$emit("update:equip_no_props",t)}}},created:function(){this.isCreated&&this.getMachineList()},methods:{getMachineList:function(){var t=this;Object(i["d"])("get",{params:{all:1,category_name:"密炼设备"}}).then((function(e){t.machineList=e.results||[],t.isCreated&&(t._equip_no=t.machineList[0].equip_no,t.$emit("changeSearch",t._equip_no))})).catch((function(t){}))},changeSearch:function(t){this.$emit("changeSearch",t)},visibleChange:function(t){t&&0===this.machineList.length&&!this.isCreated&&this.getMachineList()}}},s=o,c=a("2877"),l=Object(c["a"])(s,n,r,!1,null,null,null);e["a"]=l.exports},e7a9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"report-train-style"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",clearable:!0,"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeSearch},model:{value:t.search_date,callback:function(e){t.search_date=e},expression:"search_date"}})],1),a("el-form-item",{attrs:{label:"配方"}},[a("productNo-select",{attrs:{"is-stage-productbatch-no-remove":!0},on:{productBatchingChanged:t.productBatchingChanged}})],1),a("el-form-item",{attrs:{label:"机台"}},[a("selectEquip",{attrs:{"is-created":!0,equip_no_props:t.getParams.equip_no},on:{"update:equip_no_props":function(e){return t.$set(t.getParams,"equip_no",e)},changeSearch:t.changeSearch}})],1),a("el-form-item",{attrs:{label:"操作人"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.changeSearch,"visible-change":t.visibleChange},model:{value:t.getParams.operation_user,callback:function(e){t.$set(t.getParams,"operation_user",e)},expression:"getParams.operation_user"}},t._l(t.operatorList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.username}})})),1)],1),a("el-form-item")],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,height:t.maxHeightTable,"default-sort":{prop:"begin_time",order:"ascending"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"No"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{prop:"product_no",label:"配方编号"}}),a("el-table-column",{attrs:{prop:"plan_classes_uid",label:"计划编号",width:"140"}}),a("el-table-column",{attrs:{prop:"begin_time",width:"110",sortable:"",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间",sortable:"",width:"110"}}),a("el-table-column",{attrs:{prop:"plan_trains",label:"设定车次"}}),a("el-table-column",{attrs:{prop:"actual_trains",label:"实际车次"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.控制方式":"control_mode",label:"本/远控"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.作业方式":"operating_type",label:"手/自动"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.总重量":"actual_weight",label:"总重量"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.排胶时间":"evacuation_time",label:"排胶时间"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.排胶温度":"evacuation_temperature",label:"排胶温度"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.排胶能量":"evacuation_energy",label:"排胶能量"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.员工代号":"operation_user",label:"操作人"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.存盘时间":"product_time",label:"存盘时间",width:"100"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.密炼时间":"mixer_time",label:"密炼时间",width:"100"}}),a("el-table-column",{attrs:{prop:"v1"===t.editionNo?"production_details.间隔时间":"interval_time",label:"间隔时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.clickView(e.row,e.row.id,e.$index)}}},[t._v("查看")])]}}])})],1),a("page",{attrs:{total:t.total,"current-page":t.getParams.page},on:{currentChange:t.currentChange}}),t.showRowTable?a("div",{staticStyle:{"overflow-x":"scroll","margin-top":"20px"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loaddingExal,expression:"loaddingExal"}],staticStyle:{width:"1600px"}},[a("el-col",{staticClass:"trainContentLeft",attrs:{span:12}},[a("div",{staticClass:"trainContentLeftBox",staticStyle:{"margin-right":"10px"}},[a("el-row",{staticClass:"row-border-bottom"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("页")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[t._v(t._s(t.currentIndex+1))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("报表")])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple-light"},[t._v("打印时间")])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple-light bd-right-none"},[t._v(t._s(t.currentTime))])])],1),a("div",{staticClass:"train-title"},[t._v("基础信息")]),a("table",{staticClass:"train-one",staticStyle:{"border-collapse":"collapse"},attrs:{width:"100%",cellspacing:"0",border:"1",cellpadding:"1",frame:"hsides"}},[a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("计划编号")]),a("td",[t._v(t._s(t.rowInfo.plan_classes_uid||"--"))]),a("td",[t._v("设定车次")]),a("td",[t._v(t._s(t.rowInfo.plan_trains||"--"))]),a("td",{staticClass:"begin_time_width"},[t._v("开始")]),a("td",[t._v(t._s(t.rowInfo.begin_time||"--"))]),a("td",[t._v("本/遥控")]),a("td",[t._v(t._s(("v1"===t.editionNo?t.rowInfo.production_details.控制方式:t.rowInfo.control_mode)||"--"))])]),a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("名称")]),a("td",[t._v(t._s(t.rowInfo.product_no||"--"))]),a("td",[t._v("完成")]),a("td",[t._v(t._s(t.rowInfo.actual_trains||"--"))]),a("td",{staticClass:"begin_time_width"},[t._v("结束")]),a("td",[t._v(t._s(t.rowInfo.end_time||"--"))]),a("td",[t._v("状态")]),a("td",[t._v(t._s(t.rowInfo.status||"--"))])]),"v1"===t.editionNo?a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("排胶温度")]),a("td",[t._v(t._s(t.rowInfo.production_details.排胶温度||"--"))]),a("td",[t._v("排胶能量")]),a("td",[t._v(t._s(t.rowInfo.production_details.排胶能量||"--"))]),a("td",{staticClass:"begin_time_width"},[t._v("时间")]),a("td",[t._v(t._s(t.rowInfo.production_details.排胶时间||"--"))]),a("td",[t._v("总重")]),a("td",[t._v(t._s(t.rowInfo.production_details.总重量||"--"))])]):t._e(),"v2"===t.editionNo?a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("排胶温度")]),a("td",[t._v(t._s(t.rowInfo.evacuation_temperature||"--"))]),a("td",[t._v("排胶能量")]),a("td",[t._v(t._s(t.rowInfo.evacuation_energy||"--"))]),a("td",{staticClass:"begin_time_width"},[t._v("时间")]),a("td",[t._v(t._s(t.rowInfo.evacuation_time||"--"))]),a("td",[t._v("总重")]),a("td",[t._v(t._s(t.rowInfo.actual_weight||"--"))])]):t._e()]),a("div",{staticClass:"train-title"},[t._v("称量信息")]),a("div",{staticClass:"weighInforStyle"},[a("table",{staticClass:"train-one",staticStyle:{"border-collapse":"collapse"},attrs:{width:"100%",cellspacing:"0",border:"1",cellpadding:"1",frame:"hsides"}},[a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("No")]),a("td",[t._v("名称")]),a("td",[t._v("设定值")]),a("td",[t._v("实重")]),a("td",[t._v("状态")]),a("td",[t._v("种类")]),a("td",[t._v("超差")])]),t._l(t.weighInformationList,(function(e,n){return a("tr",{key:n,staticClass:"train-one-tr-banburying"},[a("td",[t._v(t._s(n+1))]),"v2"===t.editionNo?[a("td",[t._v(t._s(e.material_name))]),a("td",[t._v(t._s(e.plan_weight))]),a("td",[t._v(t._s(e.actual_weight))]),a("td",[t._v(t._s(e.state_balance))]),a("td",[t._v(t._s(e.material_type))]),a("td",[t._v(t._s(Math.round(100*(Number(e.plan_weight)-Number(e.actual_weight)))/100))])]:t._e(),"v1"===t.editionNo?[a("td",[t._v(t._s(e.物料名称))]),a("td",[t._v(t._s(e.设定重量))]),a("td",[t._v(t._s(e.实际重量))]),a("td",[t._v(t._s(e.秤状态))]),a("td",[t._v(t._s(e.物料类型))]),a("td",[t._v(t._s(Math.round(100*(Number(e.设定重量)-Number(e.实际重量)))/100))])]:t._e()],2)}))],2)]),0===t.weighInformationList.length?a("div",{staticClass:"noneData"},[t._v("暂无数据")]):t._e(),a("page",{staticStyle:{"text-align":"right"},attrs:{total:t.totalWeighing},on:{currentChange:t.ChangePageWeighing}}),a("div",{staticClass:"train-title train-title-border"},[t._v("密炼信息")]),a("div",{staticClass:"mixerInforStyle"},[a("table",{staticClass:"train-one",staticStyle:{"border-collapse":"collapse"},attrs:{width:"100%",cellspacing:"0",border:"1",cellpadding:"1",frame:"hsides"}},[a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("No")]),a("td",[t._v("条件名称")]),a("td",[t._v("时间")]),a("td",[t._v("温度")]),a("td",[t._v("功率")]),a("td",[t._v("能量")]),a("td",[t._v("动作名称")]),a("td",[t._v("速度")]),a("td",[t._v("压力")])]),"v1"===t.editionNo?t._l(t.mixerInformationList,(function(e,n){return a("tr",{key:n,staticClass:"train-one-tr-banburying"},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(e.条件))]),a("td",[t._v(t._s(e.时间))]),a("td",[t._v(t._s(e.温度))]),a("td",[t._v(t._s(e.功率))]),a("td",[t._v(t._s(e.能量))]),a("td",[t._v(t._s(e.动作))]),a("td",[t._v(t._s(e.转速))]),a("td",[t._v(t._s(e.压力))])])})):t._e(),"v2"===t.editionNo?t._l(t.mixerInformationList,(function(e,n){return a("tr",{key:n,staticClass:"train-one-tr-banburying"},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(e.condition))]),a("td",[t._v(t._s(e.time))]),a("td",[t._v(t._s(e.temperature))]),a("td",[t._v(t._s(e.power))]),a("td",[t._v(t._s(e.energy))]),a("td",[t._v(t._s(e.action))]),a("td",[t._v(t._s(e.rpm))]),a("td",[t._v(t._s(e.pressure))])])})):t._e()],2)]),0===t.mixerInformationList.length?a("div",{staticClass:"noneData"},[t._v("暂无数据")]):t._e(),a("page",{staticStyle:{"text-align":"right"},attrs:{total:t.totalMixer},on:{currentChange:t.ChangePageMixer}}),a("div",{staticClass:"train-title train-title-border"},[t._v("报警记录")]),a("table",{staticClass:"train-one",staticStyle:{"border-collapse":"collapse"},attrs:{width:"100%",cellspacing:"0",border:"1",cellpadding:"1",frame:"hsides"}},[a("tr",{staticClass:"train-one-tr-banburying"},[a("td",[t._v("ID")]),a("td",[t._v("名称")]),a("td",[t._v("设定值")]),a("td",[t._v("实重")]),a("td",[t._v("状态")]),a("td",[t._v("种类")]),a("td",[t._v("超差")])]),t._l(t.alarmRecordList,(function(e,n){return a("tr",{key:n,staticClass:"train-one-tr-banburying"},[a("td",[t._v("ID")]),a("td",[t._v("名称")]),a("td",[t._v("设定值")]),a("td",[t._v("实重")]),a("td",[t._v("状态")]),a("td",[t._v("种类")]),a("td",[t._v("超差")])])}))],2),0===t.alarmRecordList.length?a("div",{staticClass:"noneData"},[t._v("暂无数据")]):t._e()],1)]),a("el-col",{staticClass:"trainContentRight",attrs:{span:12}},[a("div",{staticStyle:{display:"flex"}},["v1"===t.editionNo?a("div",{staticClass:"police-record"},[a("span",[t._v("排胶能量: "+t._s(t.rowInfo.production_details.排胶能量||"--"))]),a("span",[t._v("设定: "+t._s(t.rowInfo.plan_trains||"--"))]),a("span",[t._v("时间: "+t._s(t.rowInfo.begin_time||"--")+" 至 "+t._s(t.rowInfo.end_time||"--"))]),a("br"),a("span",[t._v("排胶温度: "+t._s(t.rowInfo.production_details.排胶温度||"--"))]),a("span",[t._v("完成: "+t._s(t.rowInfo.actual_trains||"--"))]),a("span",[t._v("排胶时间: "+t._s(t.rowInfo.production_details.排胶时间||"--"))]),a("span",[t._v("名称: "+t._s(t.rowInfo.product_no||"--"))]),a("span",[t._v("总量: "+t._s(t.rowInfo.production_details.总重量||"--"))])]):t._e(),"v2"===t.editionNo?a("div",{staticClass:"police-record"},[a("span",[t._v("排胶能量: "+t._s(t.rowInfo.evacuation_energy||"--"))]),a("span",[t._v("设定: "+t._s(t.rowInfo.plan_trains||"--"))]),a("span",[t._v("时间: "+t._s(t.rowInfo.begin_time||"--")+" 至 "+t._s(t.rowInfo.end_time||"--"))]),a("br"),a("span",[t._v("排胶温度: "+t._s(t.rowInfo.evacuation_temperature||"--"))]),a("span",[t._v("完成: "+t._s(t.rowInfo.actual_trains||"--"))]),a("span",[t._v("排胶时间: "+t._s(t.rowInfo.evacuation_time||"--"))]),a("span",[t._v("名称: "+t._s(t.rowInfo.product_no||"--"))]),a("span",[t._v("总量: "+t._s(t.rowInfo.actual_weight||"--"))])]):t._e(),a("div",{staticClass:"right-button"})]),a("div",[a("ve-line",{attrs:{height:"700px",data:t.chartData,"after-set-option":t.afterSetOption,settings:t.chartSettings,extend:t.extend,colors:t.colors,toolbox:t.toolbox}})],1)])],1)],1):t._e(),a("el-dialog",{attrs:{title:"工艺曲线_"+t.rowInfo.equip_no+"-"+t.rowInfo.product_no+"-"+t.rowInfo.begin_time,visible:t.dialogVisible,width:"80%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("ve-line",{attrs:{data:t.chartData,height:t.clientHeight,"after-set-option":t.afterSetOption,settings:t.chartSettings,extend:t.extend,colors:t.colors,toolbox:t.toolbox}})],1)],1)},r=[],i=(a("4160"),a("13d5"),a("ace4"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),o=a("5530"),s=a("ed08"),c=a("316c"),l=a("c24f"),u=a("3e51"),d=a("4090"),_=a("1c2f"),p=a("1577"),g=a("2f62"),h={components:{page:u["a"],selectEquip:d["a"],ProductNoSelect:_["a"]},mixins:[p["a"]],data:function(){return{currentRowId:"",search_date:[],getParams:{page:1},operatorList:[],tableData:[],loading:!1,loadingTable:!1,loaddingExal:!0,total:0,showRowTable:!1,rowInfo:{},currentIndex:1,alarmRecordList:[],weighInformationList:[],mixerInformationList:[],curveInformationList:[],totalWeighing:0,totalMixer:0,maxHeightTable:"",dialogVisible:!1}},computed:Object(o["a"])({},Object(g["b"])(["editionNo"])),created:function(){this.maxHeightTable=document.body.clientHeight/1.8+"px",this.clientHeight=document.body.clientHeight-300+"px",this.currentRowId="",this.currentTime=Object(s["a"])("",!0);var t=Object(s["a"])();this.getParams.begin_time=t+" 00:00:00",this.getParams.end_time=t+" 23:59:59",this.search_date=[this.getParams.begin_time,this.getParams.end_time]},methods:{getList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,t.showRowTable=!1,t.tableData=[],e.next=6,Object(c["i"])("get",{params:t.getParams});case 6:a=e.sent,t.tableData=a.results||[],n=t.tableData.pop(),t.total=a.count||0,t.tableData.forEach((function(t){t.begin_time=Object(s["a"])(t.begin_time,!0),t.end_time=Object(s["a"])(t.end_time,!0)})),t.loading=!1,t.$store.commit("user/SET_EDITION",n.version),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))()},visibleChange:function(t){t&&0===this.operatorList.length&&this.getOperatorList()},getOperatorList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["c"])("get",null,{params:{all:1}});case 3:a=e.sent,n=a.results||[],r={},i=n.reduce((function(t,e){return r[e.username]||(r[e.username]=t.push(e)),t}),[]),t.operatorList=i,e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},productBatchingChanged:function(t){this.getParams.product_no=t?t.stage_product_batch_no:"",this.getParams.page=1,this.getList()},changeSearch:function(){this.loadingTable=!1,this.getParams.begin_time=this.search_date?this.search_date[0]:"",this.getParams.end_time=this.search_date?this.search_date[1]:"",this.getParams.page=1,this.getList()},handleSelectionChange:function(){},selectRubber:function(){},clickChartData:function(){v(this)},afterSetOption:function(t){t.setOption(this.options)},currentChange:function(t){this.getParams.page=t,this.getList()},getWeighInformation:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(c["j"])("get",{params:{feed_back_id:t,page:e,equip_no:a.getParams.equip_no}});case 3:return r=n.sent,a.totalWeighing=r.count,n.abrupt("return",r.results||[]);case 8:n.prev=8,n.t0=n["catch"](0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getMixerInformation:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(c["e"])("get",{params:{feed_back_id:t,page:e,equip_no:a.getParams.equip_no}});case 3:return r=n.sent,a.totalMixer=r.count,n.abrupt("return",r.results||[]);case 8:n.prev=8,n.t0=n["catch"](0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getCurveInformation:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["b"])("get",{params:{feed_back_id:t}});case 3:return a=e.sent,a.results.forEach((function(t){t.created_date_date=t.product_time.split(" ")[1]?t.product_time.split(" ")[1]:t.product_time})),e.abrupt("return",a.results||[]);case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},clickView:function(t,e,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.currentRowId!==e){r.next=4;break}if(n.showRowTable=!n.showRowTable,n.showRowTable){r.next=4;break}return r.abrupt("return");case 4:return n.currentRowId=e,n.currentIndex=a,n.rowInfo=JSON.parse(JSON.stringify(t)),"v1"!==n.editionNo||n.rowInfo.hasOwnProperty("production_details")&&n.rowInfo.production_details||(n.rowInfo.production_details={}),n.options.toolbox.feature.saveAsImage.name="工艺曲线_"+n.rowInfo.equip_no+"-"+n.rowInfo.product_no+"-"+n.rowInfo.begin_time,r.prev=9,r.next=12,Promise.all([n.getWeighInformation(e,1),n.getMixerInformation(e,1),n.getCurveInformation(e)]);case 12:return i=r.sent,n.weighInformationList=i[0]||[],n.mixerInformationList=i[1]||[],n.curveInformationList=i[2]||[],n.chartData.rows=n.curveInformationList,n.options.title.text=n.curveInformationList.length>0?n.curveInformationList[0].product_time.split(" ")[0]:"暂无数据",n.loaddingExal=!1,r.next=21,!0;case 21:n.showRowTable=r.sent,r.next=27;break;case 24:r.prev=24,r.t0=r["catch"](9),n.loaddingExal=!1;case 27:case"end":return r.stop()}}),r,null,[[9,24]])})))()},ChangePageWeighing:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getWeighInformation(e.currentRowId,t);case 2:e.weighInformationList=a.sent;case 3:case"end":return a.stop()}}),a)})))()},ChangePageMixer:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getMixerInformation(e.currentRowId,t);case 2:e.mixerInformationList=a.sent;case 3:case"end":return a.stop()}}),a)})))()},handleClose:function(t){t()}}};function v(t){var e=document.getElementsByTagName("canvas")[0];JSON.parse(JSON.stringify(e));if(e.toDataURL){var a=e.toDataURL({type:"png",pixelRatio:2});m("测试.png",a)}else t.$message.info("请更新浏览器")}function m(t,e){var a=document.createElement("a"),n=b(e),r=document.createEvent("HTMLEvents");r.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(n),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}function b(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],n=window.atob(e[1]),r=n.length,i=new Uint8Array(r),o=0;o<r;++o)i[o]=n.charCodeAt(o);return new Blob([i],{type:a})}var f=h,w=(a("27ae"),a("2877")),x=Object(w["a"])(f,n,r,!1,null,"5760eeaf",null);e["default"]=x.exports},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("4160"),a("c975"),a("a9e3"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("1276"),a("159b"),a("53ca");function n(t,e,a){var n=t?new Date(t):new Date,i={y:n.getFullYear(),m:r(n.getMonth()+1),d:r(n.getDate()),h:r(n.getHours()),i:r(n.getMinutes()),s:r(n.getSeconds()),a:r(n.getDay())};return e?i.y+"-"+i.m+"-"+i.d+" "+i.h+":"+i.i+":"+i.s:a&&"continuation"===a?i.y+i.m+i.d+i.h+i.i+i.s:i.y+"-"+i.m+"-"+i.d}function r(t){return t=Number(t),t<10?"0"+t:t}},f177:function(t,e,a){}}]);