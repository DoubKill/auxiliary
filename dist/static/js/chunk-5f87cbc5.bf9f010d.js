(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f87cbc5"],{"3e51":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{layout:"total,prev,pager,next",total:e.total,"page-size":e.pageSize,"current-page":e._currentPage},on:{"update:currentPage":function(t){e._currentPage=t},"update:current-page":function(t){e._currentPage=t},"current-change":e.currentChange}})],1)},l=[],n=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data:function(){return{}},computed:{_currentPage:{get:function(){return this.currentPage},set:function(){return 1}}},methods:{currentChange:function(e){this.$emit("currentChange",e)}}}),o=n,i=a("2877"),s=Object(i["a"])(o,r,l,!1,null,null,null);t["a"]=s.exports},"49de":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return c}));var r=a("b775"),l=a("99b1");function n(e){return Object(r["a"])({url:l["a"].MaterialsUrl,method:"get",params:e})}function o(e,t){return Object(r["a"])({url:l["a"].MaterialsUrl+t+"/",method:"put",data:e})}function i(e){return Object(r["a"])({url:l["a"].MaterialsUrl+e+"/",method:"delete"})}function s(e){return Object(r["a"])({url:l["a"].MaterialsUrl,method:"post",data:e})}function u(){return Object(r["a"])({url:l["a"].GlobalCodesUrl,method:"get",params:{class_name:"原材料类别"}})}function c(){return Object(r["a"])({url:l["a"].GlobalCodesUrl,method:"get",params:{class_name:"包装单位"}})}},7156:function(e,t,a){var r=a("861d"),l=a("d2bb");e.exports=function(e,t,a){var n,o;return l&&"function"==typeof(n=t.constructor)&&n!==a&&r(o=n.prototype)&&o!==a.prototype&&l(e,o),e}},a9e3:function(e,t,a){"use strict";var r=a("83ab"),l=a("da84"),n=a("94ca"),o=a("6eeb"),i=a("5135"),s=a("c6b6"),u=a("7156"),c=a("c04e"),m=a("d039"),f=a("7c73"),p=a("241c").f,d=a("06cf").f,_=a("9bf2").f,g=a("58a8").trim,b="Number",h=l[b],y=h.prototype,v=s(f(y))==b,k=function(e){var t,a,r,l,n,o,i,s,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,l=49;break;case 79:case 111:r=8,l=55;break;default:return+u}for(n=u.slice(2),o=n.length,i=0;i<o;i++)if(s=n.charCodeAt(i),s<48||s>l)return NaN;return parseInt(n,r)}return+u};if(n(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var E,M=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof M&&(v?m((function(){y.valueOf.call(a)})):s(a)!=b)?u(new h(k(t)),a,M):k(t)},x=r?p(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(h,E=x[w])&&!i(M,E)&&_(M,E,d(h,E));M.prototype=y,y.constructor=M,o(l,b,M)}},cae9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"25px"}},[a("el-form",{staticStyle:{"margin-left":"10px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"原材料类别"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.search},model:{value:e.params.material_type_id,callback:function(t){e.$set(e.params,"material_type_id",t)},expression:"params.material_type_id"}},e._l(e.materialTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"是否使用"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.search},model:{value:e.params.use_flag,callback:function(t){e.$set(e.params,"use_flag",t)},expression:"params.use_flag"}},e._l([{label:"Y",value:!0},{label:"N",value:!1}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"原材料名称"}},[a("el-input",{on:{input:e.search},model:{value:e.params.material_name,callback:function(t){e.$set(e.params,"material_name",t)},expression:"params.material_name"}})],1),e.permissionObj.production.material.indexOf("add")>-1?a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{on:{click:e.showCreateMaterialDialog}},[e._v("新建")])],1):e._e()],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"No"}}),a("el-table-column",{attrs:{prop:"material_no",label:"原材料代码",width:"150"}}),a("el-table-column",{attrs:{prop:"material_name",label:"原材料名称",width:"150"}}),a("el-table-column",{attrs:{prop:"for_short",label:"原材料简称",width:"100"}}),a("el-table-column",{attrs:{prop:"material_type_name",label:"原材料类别",width:"100"}}),a("el-table-column",{attrs:{prop:"package_unit_name",label:"包装单位"}}),a("el-table-column",{attrs:{formatter:e.formatter,prop:"use_flag",label:"使用与否",width:"50"}}),a("el-table-column",{attrs:{prop:"created_username",label:"创建人员"}}),a("el-table-column",{attrs:{width:"160",prop:"created_date",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"update_user_name",label:"更新人员"}}),a("el-table-column",{attrs:{prop:"last_updated_date",width:"160",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.permissionObj.production.material.indexOf("change")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showUpdateMaterialDialog(t.row)}}},[e._v("编辑 ")]):e._e(),e.permissionObj.production.material.indexOf("change")>-1?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteMaterial(t.row)}}},[e._v(e._s(t.row.use_flag?"停用":"启用")+" ")]):e._e()]}}])})],1),a("page",{attrs:{total:e.total,"current-page":e.params.page},on:{"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)},currentChange:e.currentChange}}),a("create-material-dialog",{ref:"createMaterialDialog",attrs:{"material-types":e.materialTypes,"packing-units":e.packingUnits},on:{handleSuccessed:e.getMaterialList}}),a("update-material-dialog",{ref:"updateMaterialDialog",attrs:{"material-types":e.materialTypes,"packing-units":e.packingUnits},on:{handleSuccessed:e.getMaterialList}})],1)},l=[],n=a("5530"),o=a("49de"),i=a("3e51"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加原材料基本信息",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"material_no",error:e.formError.material_no,label:"原材料编码"}},[a("el-input",{model:{value:e.form.material_no,callback:function(t){e.$set(e.form,"material_no",t)},expression:"form.material_no"}})],1),a("el-form-item",{attrs:{prop:"material_name",error:e.formError.material_name,label:"原材料名称"}},[a("el-input",{model:{value:e.form.material_name,callback:function(t){e.$set(e.form,"material_name",t)},expression:"form.material_name"}})],1),a("el-form-item",{attrs:{error:e.formError.for_short,label:"原材料简称"}},[a("el-input",{model:{value:e.form.for_short,callback:function(t){e.$set(e.form,"for_short",t)},expression:"form.for_short"}})],1),a("el-form-item",{attrs:{error:e.formError.use_flag,label:"是否启用"}},[a("el-switch",{model:{value:e.form.use_flag,callback:function(t){e.$set(e.form,"use_flag",t)},expression:"form.use_flag"}})],1),a("el-form-item",{attrs:{prop:"material_type",error:e.formError.material_type,label:"原材料类别"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.material_type,callback:function(t){e.$set(e.form,"material_type",t)},expression:"form.material_type"}},e._l(e.materialTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{error:e.formError.package_unit,label:"包装单位"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.package_unit,callback:function(t){e.$set(e.form,"package_unit",t)},expression:"form.package_unit"}},e._l(e.packingUnits,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddMaterialBaseInfo("form")}}},[e._v("确 定")])],1)],1)},u=[],c=(a("a15b"),{props:{materialTypes:{type:Array,default:function(){return[]}},packingUnits:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,form:{material_no:"",material_name:"",for_short:"",use_flag:!1,material_type:null,package_unit:null},formError:{material_no:"",material_name:"",for_short:"",use_flag:"",material_type:"",package_unit:""},rules:{material_no:[{required:!0,message:"该字段不能为空",trigger:"blur"}],material_name:[{required:!0,message:"该字段不能为空",trigger:"blur"}],material_type:[{required:!0,message:"该字段不能为空",trigger:"blur"}]}}},methods:{clearForm:function(){this.form={material_no:"",material_name:"",for_short:"",use_flag:!0,material_type:null,package_unit:null}},clearFormError:function(){this.formError={material_no:"",material_name:"",for_short:"",use_flag:"",material_type:"",package_unit:""}},show:function(){this.clearForm(),this.clearFormError(),this.dialogVisible=!0},handleAddMaterialBaseInfo:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.clearFormError(),Object(o["a"])(t.form).then((function(e){t.$message("创建成功"),t.dialogVisible=!1,t.$emit("handleSuccessed")})).catch((function(e){for(var a in t.formError)e[a]&&(t.formError[a]=e[a].join(","))}))}))}}}),m=c,f=a("2877"),p=Object(f["a"])(m,s,u,!1,null,null,null),d=p.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑原材料基本信息",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{attrs:{error:e.formError.material_no,label:"原材料编码"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.form.material_no,callback:function(t){e.$set(e.form,"material_no",t)},expression:"form.material_no"}})],1),a("el-form-item",{attrs:{error:e.formError.material_name,label:"原材料名称"}},[a("el-input",{model:{value:e.form.material_name,callback:function(t){e.$set(e.form,"material_name",t)},expression:"form.material_name"}})],1),a("el-form-item",{attrs:{error:e.formError.for_short,label:"原材料简称"}},[a("el-input",{model:{value:e.form.for_short,callback:function(t){e.$set(e.form,"for_short",t)},expression:"form.for_short"}})],1),a("el-form-item",{attrs:{error:e.formError.material_type,label:"原材料类别"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.material_type,callback:function(t){e.$set(e.form,"material_type",t)},expression:"form.material_type"}},e._l(e.materialTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{error:e.formError.package_unit,label:"包装单位"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.package_unit,callback:function(t){e.$set(e.form,"package_unit",t)},expression:"form.package_unit"}},e._l(e.packingUnits,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddMaterialBaseInfo}},[e._v("确 定")])],1)],1)},g=[],b={props:{materialTypes:{type:Array,default:function(){return[]}},packingUnits:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,form:{material_no:"",material_name:"",for_short:"",use_flag:!1,material_type:null,package_unit:null},formError:{material_no:"",material_name:"",for_short:"",use_flag:"",material_type:"",package_unit:""}}},methods:{clearFormError:function(){this.formError={material_no:"",material_name:"",for_short:"",use_flag:"",material_type:"",package_unit:""}},show:function(e){this.form=e,this.clearFormError(),this.dialogVisible=!0},handleAddMaterialBaseInfo:function(){var e=this;this.clearFormError(),Object(o["f"])(this.form,this.form.id).then((function(t){e.$message("修改成功"),e.dialogVisible=!1,e.$emit("handleSuccessed")})).catch((function(t){for(var a in e.formError)t[a]&&(e.formError[a]=t[a].join(","))}))}}},h=b,y=Object(f["a"])(h,_,g,!1,null,null,null),v=y.exports,k=a("2f62"),E={components:{page:i["a"],CreateMaterialDialog:d,UpdateMaterialDialog:v},data:function(){return{tableData:[],materialTypes:[],packingUnits:[],params:{page:1,material_type_id:null,use_flag:!0,material_name:""},total:0,currentPage:1}},computed:Object(n["a"])({},Object(k["b"])(["permission"])),created:function(){this.permissionObj=this.permission,this.getMaterialList(),this.getMaterialTypes(),this.getPackingUnits()},methods:{showCreateMaterialDialog:function(){this.$refs.createMaterialDialog.show()},showUpdateMaterialDialog:function(e){this.$refs.updateMaterialDialog.show(JSON.parse(JSON.stringify(e)))},deleteMaterial:function(e){var t=this,a=e.use_flag?"停用":"启用";this.$confirm("确定"+a+e.material_name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(e.id).then((function(e){t.$message({type:"success",message:"操作成功!"}),t.getMaterialList()}))}))},getMaterialList:function(){var e=this;Object(o["d"])(this.params).then((function(t){e.tableData=t.results||[],e.total=t.count}))},getMaterialTypes:function(){var e=this;Object(o["c"])().then((function(t){e.materialTypes=t.results}))},getPackingUnits:function(){var e=this;Object(o["e"])().then((function(t){e.packingUnits=t.results}))},search:function(){this.params.page=1,this.getMaterialList()},formatter:function(e,t){return e.use_flag?"Y":"N"},currentChange:function(e){this.params.page=e,this.getMaterialList()}}},M=E,x=Object(f["a"])(M,r,l,!1,null,"244e22ae",null);t["default"]=x.exports}}]);