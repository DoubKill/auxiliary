(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-915d2c58"],{c0c1:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n("b775"),r=n("99b1");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].WeighCbUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].WeighOilUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialsUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{params:{all:1,category_name:"密炼设备"}},n={url:r["a"].EquipUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function c(e){return Object(a["a"])({url:r["a"].MaterialSuppliers,method:"get",params:e})}},ef3b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"25px",margin:"25px auto auto auto"}},[n("el-form",{staticStyle:{"margin-left":"10px"},attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"机台"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.equipChange,"visible-change":e.equipVisibleChange},model:{value:e.equip,callback:function(t){e.equip=t},expression:"equip"}},e._l(e.equipOptions,(function(e){return n("el-option",{key:e.equip_no,attrs:{label:e.equip_no,value:e.equip_no}})})),1)],1),n("el-form-item",{staticStyle:{float:"right"}},[e.disabled?e._e():n("el-button",{attrs:{type:"info"},on:{click:e.save}},[e._v("保存并下载")])],1)],1),n("el-form",{staticStyle:{"margin-left":"10px"},attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"当前机台"}},[n("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.equip,callback:function(t){e.equip=t},expression:"equip"}})],1)],1),n("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableBinCbData,border:""}},[n("el-table-column",{attrs:{label:"炭黑称"}},[n("el-table-column",{attrs:{prop:"tank_name",width:"150%",label:"炭黑罐"}}),n("el-table-column",{attrs:{prop:"material_no",label:"物料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.row.use_flag},on:{change:function(n){return e.masterialChange(t.row)}},model:{value:t.row.material_no,callback:function(n){e.$set(t.row,"material_no",n)},expression:"scope.row.material_no"}},e._l(e.cbOptions,(function(e){return n("el-option",{key:e.material_no,attrs:{label:e.material_name,value:e.material_no}})})),1)]}}])}),n("el-table-column",{attrs:{prop:"provenance",label:"产地"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.row.use_flag},on:{"visible-change":function(n){return e.getProvenanceOptions(n,t.row.material_no)}},model:{value:t.row.provenance,callback:function(n){e.$set(t.row,"provenance",n)},expression:"scope.row.provenance"}},e._l(e.provenanceOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),n("el-table-column",{attrs:{formatter:e.formatter,prop:"use_flag",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"停用",disabled:e.disabled},model:{value:t.row.use_flag,callback:function(n){e.$set(t.row,"use_flag",n)},expression:"scope.row.use_flag"}})]}}])})],1)],1),n("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableBinOilData,border:""}},[n("el-table-column",{attrs:{label:"油料称"}},[n("el-table-column",{attrs:{prop:"tank_name",width:"150%",label:"油料罐"}}),n("el-table-column",{attrs:{prop:"material_no",label:"物料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.row.use_flag},on:{change:function(n){return e.masterialChange(t.row)}},model:{value:t.row.material_no,callback:function(n){e.$set(t.row,"material_no",n)},expression:"scope.row.material_no"}},e._l(e.oilOptions,(function(e){return n("el-option",{key:e.material_no,attrs:{label:e.material_name,value:e.material_no}})})),1)]}}])}),n("el-table-column",{attrs:{prop:"provenance",label:"产地"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.row.use_flag},on:{"visible-change":function(n){return e.getProvenanceOptions(n,t.row.material_no)}},model:{value:t.row.provenance,callback:function(n){e.$set(t.row,"provenance",n)},expression:"scope.row.provenance"}},e._l(e.provenanceOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),n("el-table-column",{attrs:{formatter:e.formatter,prop:"use_flag",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"停用",disabled:e.disabled},model:{value:t.row.use_flag,callback:function(n){e.$set(t.row,"use_flag",n)},expression:"scope.row.use_flag"}})]}}])})],1)],1)],1)},r=[],i=(n("c975"),n("96cf"),n("1da1")),l=n("5530"),s=n("c0c1"),o=n("2f62"),c={data:function(){return{tableBinCbData:[],tableBinOilData:[],equip:"",equipOptions:[],materialsTypeId:"",cbOptions:[],oilOptions:[],disabled:!0,provenanceOptions:[]}},computed:Object(l["a"])({},Object(o["b"])(["permission"])),created:function(){this.getDisabled(),this.getEquip(),this.getMaterialsCbList(),this.getMaterialsOilList()},methods:{getProvenanceOptions:function(e,t){var n=this;console.log(e,"bool"),console.log(t,"material_no"),e&&Object(s["b"])({material_no:t}).then((function(e){n.provenanceOptions=e}))},getDisabled:function(){this.permissionObj=this.permission,this.disabled=!(this.permissionObj.production.materialtankstatus.indexOf("change")>-1)},getEquip:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])("get");case 2:n=t.sent,e.equip=n.results[0].equip_no,e.getCbList(),e.getOilList();case 6:case"end":return t.stop()}}),t)})))()},getCbList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["d"])("get",{params:{equip_no:e.equip}});case 3:n=t.sent,e.tableBinCbData=n.results,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getOilList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["e"])("get",{params:{equip_no:e.equip}});case 3:n=t.sent,e.tableBinOilData=n.results,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},putCbList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["d"])("put",{data:e.tableBinCbData});case 3:e.$message({showClose:!0,message:"炭黑罐保存成功",type:"success",center:!0}),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},putOilList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["e"])("put",{data:e.tableBinOilData});case 3:e.$message({showClose:!0,message:"油料罐保存成功",type:"success",center:!0}),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getEquipList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])("get");case 3:n=t.sent,e.equipOptions=n.results,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMaterialsCbList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["c"])("get",{params:{material_type_name:"炭黑",all:1}});case 3:n=t.sent,e.cbOptions=n.results,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMaterialsOilList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["c"])("get",{params:{material_type_name:"油料",all:1}});case 3:n=t.sent,e.oilOptions=n.results,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},formatter:function(e,t){return e.use_flag?"使用":"停用"},equipVisibleChange:function(e){e&&this.getEquipList()},equipChange:function(){this.getCbList(),this.getOilList()},masterialChange:function(e){e.provenance=""},stateChange:function(){},save:function(){console.log(this.tableBinCbData),console.log(this.tableBinOilData),this.putCbList(),this.putOilList()}}},u=c,p=n("2877"),b=Object(p["a"])(u,a,r,!1,null,"bd7bc8d6",null);t["default"]=b.exports}}]);