(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58716cdf"],{1148:function(e,t,i){"use strict";var a=i("a691"),r=i("1d80");e.exports="".repeat||function(e){var t=String(r(this)),i="",n=a(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i}},"2cc9":function(e,t,i){"use strict";var a=i("5178"),r=i.n(a);r.a},"3c17":function(e,t,i){"use strict";i.d(t,"o",(function(){return n})),i.d(t,"n",(function(){return l})),i.d(t,"i",(function(){return s})),i.d(t,"h",(function(){return o})),i.d(t,"k",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"l",(function(){return p})),i.d(t,"j",(function(){return m})),i.d(t,"m",(function(){return h})),i.d(t,"c",(function(){return _})),i.d(t,"e",(function(){return b})),i.d(t,"g",(function(){return d})),i.d(t,"f",(function(){return g})),i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return v}));var a=i("b775"),r=i("99b1");function n(e){return Object(a["a"])({url:r["a"].ValidateVersionsUrl,method:"get",params:e})}function l(e,t){return Object(a["a"])({url:r["a"].TankMaterialsUrl,method:"get",params:{equip_no:e,tank_type:t}})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)var n=r["a"].RubberMaterialUrl+t+"/";else n=r["a"].RubberMaterialUrl;var l={url:n,method:e};return Object.assign(l,i),Object(a["a"])(l)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)var n=r["a"].RubberMaterialCopyUrl+t+"/";else n=r["a"].RubberMaterialCopyUrl;var l={url:n,method:e};return Object.assign(l,i),Object(a["a"])(l)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)var n=r["a"].RubberProcessStepUrl+t+"/";else n=r["a"].RubberProcessStepUrl;var l={url:n,method:e};return Object.assign(l,i),Object(a["a"])(l)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].EquipAllUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].SiteUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].RecipeNoUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].StageUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].DevTypeUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].GlobalSITEUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)var n=r["a"].MaterialsUrl+t+"/";else n=r["a"].MaterialsUrl;var l={url:n,method:e};return Object.assign(l,i),Object(a["a"])(l)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].MaterialTypelUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].ConditionUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={url:r["a"].ActionUrl,method:e};return Object.assign(i,t),Object(a["a"])(i)}},"408a":function(e,t,i){var a=i("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"45fc":function(e,t,i){"use strict";var a=i("23e7"),r=i("b727").some,n=i("a640"),l=i("ae40"),s=n("some"),o=l("some");a({target:"Array",proto:!0,forced:!s||!o},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5178:function(e,t,i){},"7db0":function(e,t,i){"use strict";var a=i("23e7"),r=i("b727").find,n=i("44d2"),l=i("ae40"),s="find",o=!0,c=l(s);s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},a434:function(e,t,i){"use strict";var a=i("23e7"),r=i("23cb"),n=i("a691"),l=i("50c4"),s=i("7b0b"),o=i("65f0"),c=i("8418"),u=i("1dde"),p=i("ae40"),m=u("splice"),h=p("splice",{ACCESSORS:!0,0:0,1:2}),_=Math.max,b=Math.min,d=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!h},{splice:function(e,t){var i,a,u,p,m,h,f=s(this),v=l(f.length),S=r(e,v),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=v-S):(i=w-2,a=b(_(n(t),0),v-S)),v+i-a>d)throw TypeError(g);for(u=o(f,a),p=0;p<a;p++)m=S+p,m in f&&c(u,p,f[m]);if(u.length=a,i<a){for(p=S;p<v-a;p++)m=p+a,h=p+i,m in f?f[h]=f[m]:delete f[h];for(p=v;p>v-a+i;p--)delete f[p-1]}else if(i>a)for(p=v-a;p>S;p--)m=p+a-1,h=p+i-1,m in f?f[h]=f[m]:delete f[h];for(p=0;p<i;p++)f[p+S]=arguments[p+2];return f.length=v-a+i,u}})},b680:function(e,t,i){"use strict";var a=i("23e7"),r=i("a691"),n=i("408a"),l=i("1148"),s=i("d039"),o=1..toFixed,c=Math.floor,u=function(e,t,i){return 0===t?i:t%2===1?u(e,t-1,i*e):u(e*e,t/2,i)},p=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},m=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){o.call({})}));a({target:"Number",proto:!0,forced:m},{toFixed:function(e){var t,i,a,s,o=n(this),m=r(e),h=[0,0,0,0,0,0],_="",b="0",d=function(e,t){var i=-1,a=t;while(++i<6)a+=e*h[i],h[i]=a%1e7,a=c(a/1e7)},g=function(e){var t=6,i=0;while(--t>=0)i+=h[t],h[t]=c(i/e),i=i%e*1e7},f=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==h[e]){var i=String(h[e]);t=""===t?i:t+l.call("0",7-i.length)+i}return t};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(_="-",o=-o),o>1e-21)if(t=p(o*u(2,69,1))-69,i=t<0?o*u(2,-t,1):o/u(2,t,1),i*=4503599627370496,t=52-t,t>0){d(0,i),a=m;while(a>=7)d(1e7,0),a-=7;d(u(10,a,1),0),a=t-1;while(a>=23)g(1<<23),a-=23;g(1<<a),d(1,1),g(2),b=f()}else d(0,i),d(1<<-t,0),b=f()+l.call("0",m);return m>0?(s=b.length,b=_+(s<=m?"0."+l.call("0",m-s)+b:b.slice(0,s-m)+"."+b.slice(s-m))):b=_+b,b}})},c031:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recipe_create"},[i("el-form",{ref:"generateRecipeForm",attrs:{inline:!0,model:e.generateRecipeForm,rules:e.rules}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"机台",prop:"SelectEquip"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择",disabled:e.select_recipe_component},on:{"visible-change":e.SelectEquipDisplay,change:e.SelectEquipChange},model:{value:e.generateRecipeForm.SelectEquip,callback:function(t){e.$set(e.generateRecipeForm,"SelectEquip",t)},expression:"generateRecipeForm.SelectEquip"}},e._l(e.SelectEquipOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.equip_name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"机型名称"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",disabled:!0},model:{value:e.category__category_name,callback:function(t){e.category__category_name=t},expression:"category__category_name"}})],1),i("el-form-item",{attrs:{label:"预计炼胶时间"}},[i("el-input-number",{staticStyle:{width:"90px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.production_time_interval,callback:function(t){e.production_time_interval=t},expression:"production_time_interval"}})],1)],1),i("el-col",{attrs:{span:18}},[i("el-row",[i("el-form-item",[i("el-radio",{attrs:{label:!0},on:{change:e.receipeTypeChange},model:{value:e.normalReceipe,callback:function(t){e.normalReceipe=t},expression:"normalReceipe"}},[e._v(" 常规配方 ")])],1),i("el-form-item",{attrs:{label:"产地",prop:"SelectSite"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择",disabled:e.select_recipe_component||!e.normalReceipe},on:{"visible-change":e.SelectSiteDisplay},model:{value:e.generateRecipeForm.SelectSite,callback:function(t){e.$set(e.generateRecipeForm,"SelectSite",t)},expression:"generateRecipeForm.SelectSite"}},e._l(e.SelectSiteOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"SITE",prop:"SelectSITE"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择",disabled:e.select_recipe_component||!e.normalReceipe},on:{change:e.generateRecipeName,"visible-change":e.SelectGlobalSITEDisplay},model:{value:e.generateRecipeForm.SelectSITE,callback:function(t){e.$set(e.generateRecipeForm,"SelectSITE",t)},expression:"generateRecipeForm.SelectSITE"}},e._l(e.SelectSITEOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"段次",prop:"SelectStage"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择",disabled:e.select_recipe_component||!e.normalReceipe},on:{change:e.generateRecipeName,"visible-change":e.SelectStageDisplay},model:{value:e.generateRecipeForm.SelectStage,callback:function(t){e.$set(e.generateRecipeForm,"SelectStage",t)},expression:"generateRecipeForm.SelectStage"}},e._l(e.SelectStageOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"胶料编码",prop:"SelectRecipeNo"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{filterable:"",size:"mini",clearable:"",placeholder:"请选择",disabled:e.select_recipe_component||!e.normalReceipe},on:{change:e.generateRecipeName,"visible-change":e.SelectRecipeNoDisplay},model:{value:e.generateRecipeForm.SelectRecipeNo,callback:function(t){e.$set(e.generateRecipeForm,"SelectRecipeNo",t)},expression:"generateRecipeForm.SelectRecipeNo"}},e._l(e.SelectRecipeNoOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.product_no,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"版本",prop:"version"}},[i("el-input",{staticStyle:{width:"90px"},attrs:{disabled:e.select_recipe_component||!e.normalReceipe,size:"mini",placeholder:"版本"},on:{change:e.generateRecipeName},model:{value:e.generateRecipeForm.version,callback:function(t){e.$set(e.generateRecipeForm,"version",t)},expression:"generateRecipeForm.version"}})],1),i("el-form-item",{attrs:{label:"方案"}},[i("el-input",{staticStyle:{width:"90px"},attrs:{disabled:e.select_recipe_component||!e.normalReceipe,size:"mini",placeholder:"方案"},model:{value:e.generateRecipeForm.scheme,callback:function(t){e.$set(e.generateRecipeForm,"scheme",t)},expression:"generateRecipeForm.scheme"}})],1)],1),i("el-row",[i("el-form-item",[i("el-radio",{attrs:{label:!1},on:{change:e.receipeTypeChange},model:{value:e.normalReceipe,callback:function(t){e.normalReceipe=t},expression:"normalReceipe"}},[e._v(" 特殊配方 ")])],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.normalReceipe,expression:"!normalReceipe"}],attrs:{label:"配方编号",prop:"stage_product_batch_no"}},[i("el-input",{attrs:{maxlength:"19",size:"mini",disabled:e.normalReceipe},on:{input:e.recipeNameChange},model:{value:e.generateRecipeForm.stage_product_batch_no,callback:function(t){e.$set(e.generateRecipeForm,"stage_product_batch_no",t)},expression:"generateRecipeForm.stage_product_batch_no"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.normalReceipe,expression:"normalReceipe"}],attrs:{label:"配方编号",required:""}},[i("el-input",{attrs:{disabled:!0,size:"mini"}})],1)],1)],1)],1)],1),i("br"),i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"机台"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:!0},model:{value:e.equip,callback:function(t){e.equip=t},expression:"equip"}})],1),i("el-form-item",{attrs:{label:"配方编号"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:!0},model:{value:e.stage_product_batch_no,callback:function(t){e.stage_product_batch_no=t},expression:"stage_product_batch_no"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"配方id"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:!0},model:{value:e.product_batching,callback:function(t){e.product_batching=t},expression:"product_batching"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{on:{click:e.recipe_return_list}},[e._v("返回")])],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{on:{click:e.AddRecipeInfoStep}},[e._v("保存退出")])],1)],1),i("el-form",{attrs:{inline:!0}},[i("br"),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{attrs:{label:"超温最短时间"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.mini_time,callback:function(t){e.mini_time=t},expression:"mini_time"}})],1),i("el-form-item",{attrs:{label:"进胶最低温度"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.mini_temp,callback:function(t){e.mini_temp=t},expression:"mini_temp"}})],1),i("el-form-item",{attrs:{label:"超温温度"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.over_temp,callback:function(t){e.over_temp=t},expression:"over_temp"}})],1),i("el-form-item",{attrs:{label:"胶料总误差"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:3,step:.1,min:0,"controls-position":"right",size:"mini"},model:{value:e.batching_error,callback:function(t){e.batching_error=t},expression:"batching_error"}})],1),i("el-form-item",{attrs:{label:"转子水温"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.zz_temp,callback:function(t){e.zz_temp=t},expression:"zz_temp"}})],1),i("el-form-item",{attrs:{label:"卸料门水温"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.xlm_temp,callback:function(t){e.xlm_temp=t},expression:"xlm_temp"}})],1),i("el-form-item",{attrs:{label:"侧壁水温"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.cb_temp,callback:function(t){e.cb_temp=t},expression:"cb_temp"}})],1)],1)]),i("el-col",{attrs:{span:0}},[i("div",{staticClass:"grid-content bg-purple"})])],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{attrs:{label:"炼胶超时时间"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.over_time,callback:function(t){e.over_time=t},expression:"over_time"}})],1),i("el-form-item",{attrs:{label:"进胶最高温度"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.max_temp,callback:function(t){e.max_temp=t},expression:"max_temp"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.reuse_flag,expression:"reuse_flag"}],attrs:{label:"回收时间"}},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.reuse_time,callback:function(t){e.reuse_time=t},expression:"reuse_time"}})],1),i("el-form-item",{attrs:{label:"是否回收"}},[[i("el-radio",{attrs:{label:!0},model:{value:e.reuse_flag,callback:function(t){e.reuse_flag=t},expression:"reuse_flag"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.reuse_flag,callback:function(t){e.reuse_flag=t},expression:"reuse_flag"}},[e._v("否")])]],2),i("el-form-item",{attrs:{label:" "}},[i("el-radio",{attrs:{label:!0},model:{value:e.temp_use_flag,callback:function(t){e.temp_use_flag=t},expression:"temp_use_flag"}},[e._v("三区水温启动")]),i("el-radio",{attrs:{label:!1},model:{value:e.temp_use_flag,callback:function(t){e.temp_use_flag=t},expression:"temp_use_flag"}},[e._v("三区水温停用")])],1),i("el-form-item",{attrs:{label:"收皮",prop:"SelectEquip"}},[i("el-select",{staticStyle:{width:"85px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.sp_num,callback:function(t){e.sp_num=t},expression:"sp_num"}},e._l(e.sp_num_options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"车/托"}}),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"配方停用"}},[i("el-checkbox",{model:{value:e.use_flag,callback:function(t){e.use_flag=t},expression:"use_flag"}})],1)],1)]),i("el-col",{attrs:{span:0}},[i("div",{staticClass:"grid-content bg-purple"})])],1)],1),i("br"),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:9}},[i("div",{staticClass:"grid-content bg-purple"},[i("span",{staticClass:"font_custom"},[e._v("胶料称量")]),i("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.rubber_tableData,border:""}},[i("el-table-column",{attrs:{align:"center",width:"50%",prop:"sn",label:"序号"}}),i("el-table-column",{attrs:{align:"center",width:"230",prop:"material_name",label:"胶料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{staticClass:"input-with-select",attrs:{size:"mini",disabled:!0},model:{value:t.row.material_name,callback:function(i){e.$set(t.row,"material_name",i)},expression:"scope.row.material_name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(i){return e.selectMaterial(t.row)}},slot:"append"})],1)]}}])}),i("el-table-column",{attrs:{align:"center",label:"设定值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.actual_weight,callback:function(i){e.$set(t.row,"actual_weight",i)},expression:"scope.row.actual_weight"}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"误差值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.standard_error,callback:function(i){e.$set(t.row,"standard_error",i)},expression:"scope.row.standard_error"}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.removeRubberRow(t.row)}}},[e._v("删除")])]}}])})],1),i("el-form",[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("div",[e._v("序号"),i("el-input-number",{staticStyle:{"margin-right":"6px","margin-left":"6px"},attrs:{min:1,size:"mini",controls:!1},model:{value:e.rubberSnForInsert,callback:function(t){e.rubberSnForInsert=t},expression:"rubberSnForInsert"}}),i("el-button",{attrs:{size:"mini",disabled:!e.insertRubberEnbale()},on:{click:e.insertBeforeSnOneRubber}},[e._v("前插入一行")])],1),i("el-button",{attrs:{size:"mini"},on:{click:e.insertOneRubber}},[e._v("插入一行")])],1)],1),i("span",{staticClass:"font_custom"},[e._v("炭黑称量")]),i("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.carbon_tableData,border:""}},[i("el-table-column",{attrs:{align:"center",width:"40",prop:"sn",label:"序号"}}),i("el-table-column",{attrs:{align:"center",prop:"action_name",label:"动作"}},[e._v("投料")]),i("el-table-column",{attrs:{width:"250",align:"center",label:"炭黑名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticStyle:{width:"220px"},on:{change:function(i){return e.materialChange(i,t.$index,e.tankCarbons,e.carbon_tableData)}},model:{value:t.row._index,callback:function(i){e.$set(t.row,"_index",i)},expression:"scope.row._index"}},e._l(e.tankCarbons,(function(t,a){return i("el-option",{key:a,attrs:{label:t.label,value:a}},[i("span",[e._v(e._s(t.tank_name))]),e._v(" "),i("span",[e._v(e._s(t.material_name))])])})),1)]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"产地"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.provenance?t.row.provenance:"--")+" ")]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"设定值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.actual_weight,callback:function(i){e.$set(t.row,"actual_weight",i)},expression:"scope.row.actual_weight"}})]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"误差值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.standard_error,callback:function(i){e.$set(t.row,"standard_error",i)},expression:"scope.row.standard_error"}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.removeCarbonRow(t.row)}}},[e._v("删除")])]}}])})],1),i("el-form",[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("div",[e._v("序号"),i("el-input-number",{staticStyle:{"margin-right":"6px","margin-left":"6px"},attrs:{min:1,size:"mini",controls:!1},model:{value:e.carbonSnForInsert,callback:function(t){e.carbonSnForInsert=t},expression:"carbonSnForInsert"}}),i("el-button",{attrs:{size:"mini",disabled:!e.insertCarbonEnbale()},on:{click:e.insertBeforeSnOneCarbon}},[e._v("前插入一行")])],1),i("el-button",{attrs:{size:"mini"},on:{click:e.insertOnecarbon}},[e._v("插入一行")])],1)],1),i("span",{staticClass:"font_custom"},[e._v("油料称量")]),i("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.oil_tableData,border:""}},[i("el-table-column",{attrs:{align:"center",width:"40",prop:"sn",label:"序号"}}),i("el-table-column",{attrs:{align:"center",prop:"action_name",label:"动作"}},[e._v("投料")]),i("el-table-column",{attrs:{width:"250",align:"center",label:"油脂名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticClass:"setOption",staticStyle:{width:"220px"},on:{change:function(i){return e.materialChange(i,t.$index,e.tankOils,e.oil_tableData)}},model:{value:t.row._index,callback:function(i){e.$set(t.row,"_index",i)},expression:"scope.row._index"}},e._l(e.tankOils,(function(t,a){return i("el-option",{key:a,attrs:{label:t.label,value:a}},[i("span",[e._v(e._s(t.tank_name))]),e._v(" "),i("span",[e._v(e._s(t.material_name))])])})),1)]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"产地"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.provenance?t.row.provenance:"--")+" ")]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"设定值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.actual_weight,callback:function(i){e.$set(t.row,"actual_weight",i)},expression:"scope.row.actual_weight"}})]}}])}),i("el-table-column",{attrs:{align:"center",width:"95",label:"误差值(kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"70px"},attrs:{precision:2,step:.1,min:0,size:"mini",controls:!1},model:{value:t.row.standard_error,callback:function(i){e.$set(t.row,"standard_error",i)},expression:"scope.row.standard_error"}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.removeOilRow(t.row)}}},[e._v("删除")])]}}])})],1),i("el-form",[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("div",[e._v("序号"),i("el-input-number",{staticStyle:{"margin-right":"6px","margin-left":"6px"},attrs:{min:1,size:"mini",controls:!1},model:{value:e.oilSnForInsert,callback:function(t){e.oilSnForInsert=t},expression:"oilSnForInsert"}}),i("el-button",{attrs:{size:"mini",disabled:!e.insertOilEnbale()},on:{click:e.insertBeforeSnOneOil}},[e._v("前插入一行")])],1),i("el-button",{attrs:{size:"mini"},on:{click:e.insertOneOil}},[e._v("插入一行")])],1)],1)],1)]),i("el-col",{attrs:{span:15}},[i("div",{staticClass:"grid-content bg-purple"},[i("span",{staticClass:"font_custom"},[e._v("密炼规程")]),i("table",{staticClass:"table table-bordered",staticStyle:{width:"100%",color:"#909399","font-size":"14px","border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#ebeef4"}},[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("序号")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("条件")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("时间")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("温度")]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("能量")]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("功率")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("动作")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("压力")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("转速")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("操作")])])]),i("tbody",{staticStyle:{color:"#606266"}},e._l(e.RecipeMaterialList,(function(t,a){return i("tr",{key:a},[i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(t.sn))]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择"},on:{"visible-change":e.SelectConditionDisplay},model:{value:t.condition,callback:function(i){e.$set(t,"condition",i)},expression:"step_ele.condition"}},e._l(e.SelectConditionOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.condition,value:e.id}})})),1)],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{step:1,"step-strictly":"",min:0,controls:!1,size:"mini"},model:{value:t.time,callback:function(i){e.$set(t,"time",i)},expression:"step_ele.time"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{step:1,"step-strictly":"",min:0,controls:!1,size:"mini"},model:{value:t.temperature,callback:function(i){e.$set(t,"temperature",i)},expression:"step_ele.temperature"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{precision:1,step:.1,min:0,controls:!1,size:"mini"},model:{value:t.energy,callback:function(i){e.$set(t,"energy",i)},expression:"step_ele.energy"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{precision:1,step:.1,min:0,controls:!1,size:"mini"},model:{value:t.power,callback:function(i){e.$set(t,"power",i)},expression:"step_ele.power"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:"",placeholder:"请选择"},on:{"visible-change":e.SelectActionDisplay},model:{value:t.action,callback:function(i){e.$set(t,"action",i)},expression:"step_ele.action"}},e._l(e.SelectActionOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.action,value:e.id}})})),1)],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{precision:1,step:.1,min:0,controls:!1,size:"mini"},model:{value:t.pressure,callback:function(i){e.$set(t,"pressure",i)},expression:"step_ele.pressure"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{staticStyle:{width:"60px"},attrs:{step:1,"step-strictly":"",min:0,controls:!1,size:"mini"},model:{value:t.rpm,callback:function(i){e.$set(t,"rpm",i)},expression:"step_ele.rpm"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.del_recipe_step_row(t,a)}}},[e._v("删除")])],1)])})),0)]),i("el-form",[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("div",[e._v("序号"),i("el-input-number",{staticStyle:{"margin-right":"6px","margin-left":"6px"},attrs:{min:1,size:"mini",controls:!1},model:{value:e.recipeStepSnForInsert,callback:function(t){e.recipeStepSnForInsert=t},expression:"recipeStepSnForInsert"}}),i("el-button",{attrs:{size:"mini",disabled:!e.insertRecipeStepEnbale()},on:{click:e.insert_before_sn_recipe_step}},[e._v("前插入一行")])],1),i("el-button",{attrs:{size:"mini"},on:{click:e.insert_recipe_step}},[e._v("插入一行")])],1)],1)],1)])],1),i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,width:"90%",title:"胶料配料标准",visible:e.dialogRubberMaterialStandard},on:{"update:visible":function(t){e.dialogRubberMaterialStandard=t}}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"预计炼胶时间"}},[i("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":"",min:0,"controls-position":"right",size:"mini"},model:{value:e.production_time_interval,callback:function(t){e.production_time_interval=t},expression:"production_time_interval"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{on:{click:e.saveMaterialClicked}},[e._v("确定")])],1)],1),i("br"),i("table",{staticClass:"table table-bordered",staticStyle:{width:"100%",color:"#909399","font-size":"14px","border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#ebeef4"}},[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("No")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("类别")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("原材料")]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("设定值(kg)")]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("误差值(kg)")]),i("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("操作")])])]),i("tbody",{staticStyle:{color:"#606266"}},e._l(e.ProductRecipe,(function(t,a){return i("tr",{key:a},[i("td",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(t.material))]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(a+1))]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(t.material_type))]),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input",{staticClass:"input-with-select",staticStyle:{width:"70%"},attrs:{size:"mini",disabled:!0},model:{value:t.material_name,callback:function(i){e.$set(t,"material_name",i)},expression:"material_ele.material_name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(i){return e.pop_up_raw_material(t,a)}},slot:"append"})],1)],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{attrs:{precision:2,step:.1,min:0,size:"mini","controls-position":"right"},model:{value:t.actual_weight,callback:function(i){e.$set(t,"actual_weight",e._n(i))},expression:"material_ele.actual_weight"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-input-number",{attrs:{precision:2,step:.1,min:0,size:"mini","controls-position":"right"},model:{value:t.standard_error,callback:function(i){e.$set(t,"standard_error",e._n(i))},expression:"material_ele.standard_error"}})],1),i("td",{staticStyle:{"text-align":"center",height:"48px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.del_material_row(t,a)}}},[e._v("删除")])],1)])})),0)]),i("el-form",[i("el-form-item",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("el-button",{on:{click:e.insert_material_changed}},[e._v("插入一行")])],1)],1)],1),i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,width:"70%",title:"原材料选择",visible:e.dialogRawMaterialSync},on:{"update:visible":function(t){e.dialogRawMaterialSync=t}}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"原材料类别"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{"visible-change":e.materialTypeDisplay,change:e.materialTypeChange},model:{value:e.materialType,callback:function(t){e.materialType=t},expression:"materialType"}},e._l(e.materialTypeOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),e._v(" 原材料编号:"),i("el-input",{staticStyle:{width:"20%"},on:{input:e.search_material_no_Change},model:{value:e.search_material_no,callback:function(t){e.search_material_no=t},expression:"search_material_no"}}),e._v(" 原材料名称:"),i("el-input",{staticStyle:{width:"20%"},on:{input:e.search_material_name_Change},model:{value:e.search_material_name,callback:function(t){e.search_material_name=t},expression:"search_material_name"}})],1),i("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,border:""}},[i("el-table-column",{attrs:{align:"center",label:"S",width:"30"}}),i("el-table-column",{attrs:{align:"center",prop:"material_no",label:"原材料代码"}}),i("el-table-column",{attrs:{align:"center",prop:"material_name",label:"原材料名称"}}),i("el-table-column",{attrs:{align:"center",prop:"material_type_name",label:"原材料类别"}}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button-group",[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleMaterialSelect(t.row)}}},[e._v("选中 ")])],1)]}}])})],1),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.tableDataTotal,layout:"total, prev, pager, next"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.pagehandleCurrentChange}})],1)],1)},r=[],n=(i("99af"),i("7db0"),i("c975"),i("d81d"),i("45fc"),i("a434"),i("b680"),i("5530")),l=(i("96cf"),i("1da1")),s=i("3c17"),o={data:function(){return{SelectEquipOptions:[],SelectSiteOptions:[],SelectSITEOptions:[],SelectRecipeNoOptions:[],SelectStageOptions:[],SelectConditionOptions:[],SelectActionOptions:[],materialTypeOptions:[],category__category_name:null,materialType:null,search_material_no:null,search_material_name:null,select_recipe_component:!1,sp_num_options:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],generateRecipeForm:{SelectEquip:"",SelectSite:"",SelectSITE:"",SelectRecipeNo:"",SelectStage:"",version:"",scheme:"",stage_product_batch_no:""},rules:{SelectEquip:[{required:!0,message:"请选择机台",trigger:"change"}],SelectSite:[{required:!0,message:"请选择产地",trigger:"change"}],SelectSITE:[{required:!0,message:"请选择SITE",trigger:"change"}],SelectRecipeNo:[{required:!0,message:"请选择胶料编码",trigger:"change"}],SelectStage:[{required:!0,message:"请选择段次",trigger:"change"}],version:[{required:!0,message:"请输入版本",blur:"change"}],stage_product_batch_no:[{required:!0,message:"请输入配方编号",blur:"change"}]},generateRecipeFormError:{SelectEquip:"",SelectSite:"",SelectSITE:"",SelectRecipeNo:"",SelectStage:"",version:"",scheme:""},dialogRubberMaterialStandard:!1,ProductRecipe:[],RecipeMaterialList:[{sn:1,time:void 0,temperature:void 0,energy:void 0,power:void 0,pressure:void 0,rpm:void 0}],raw_material_index:null,auto_flag:0,dialogRawMaterialSync:!1,tableData:[],rubber_tableData:[],carbon_tableData:[],oil_tableData:[],currentRow:{},currentPage:1,pageSize:10,tableDataTotal:0,equip:null,stage_product_batch_no:null,product_batching:null,mini_time:void 0,mini_temp:void 0,over_temp:void 0,batching_error:void 0,zz_temp:void 0,xlm_temp:void 0,cb_temp:void 0,over_time:void 0,max_temp:void 0,reuse_time:void 0,reuse_flag:!0,temp_use_flag:!0,sp_num:void 0,use_flag:!0,production_time_interval:void 0,time:void 0,temperature:void 0,energy:void 0,power:void 0,pressure:void 0,rpm:void 0,condition:null,standard_error:null,batching_details_list:[],normalReceipe:!0,tankOils:[],tankCarbons:[],recipeStepSnForInsert:1,rubberSnForInsert:1,carbonSnForInsert:1,oilSnForInsert:1}},created:function(){},methods:{recipeNameChange:function(){this.stage_product_batch_no=this.generateRecipeForm.stage_product_batch_no},removeOilRow:function(e){this.oil_tableData.splice(this.oil_tableData.indexOf(e),1)},removeCarbonRow:function(e){this.carbon_tableData.splice(this.carbon_tableData.indexOf(e),1)},insertRubberEnbale:function(){var e=this;return this.rubber_tableData.some((function(t){return t.sn===e.rubberSnForInsert}))},insertBeforeSnOneRubber:function(){for(var e=this,t=this.rubber_tableData.find((function(t){return t.sn===e.rubberSnForInsert})),i=this.rubber_tableData.indexOf(t),a=i;a<this.rubber_tableData.length;++a)this.rubber_tableData[a].sn+=1;this.rubber_tableData.splice(i,0,{sn:this.rubberSnForInsert,actual_weight:0,standard_error:0,material_name:""})},insertOneRubber:function(){var e=this.rubber_tableData.length+1;this.rubber_tableData[this.rubber_tableData.length-1]&&(e=this.rubber_tableData[this.rubber_tableData.length-1].sn+1),this.rubber_tableData.push({sn:e,actual_weight:0,standard_error:0,material_name:""})},insertCarbonEnbale:function(){var e=this;return this.carbon_tableData.some((function(t){return t.sn===e.carbonSnForInsert}))},insertBeforeSnOneCarbon:function(){for(var e=this,t=this.carbon_tableData.find((function(t){return t.sn===e.carbonSnForInsert})),i=this.carbon_tableData.indexOf(t),a=i;a<this.carbon_tableData.length;++a)this.carbon_tableData[a].sn+=1;this.carbon_tableData.splice(i,0,{sn:this.carbonSnForInsert,actual_weight:0,standard_error:0,material_name:""})},insertOnecarbon:function(){var e=this.carbon_tableData.length+1;this.carbon_tableData[this.carbon_tableData.length-1]&&(e=this.carbon_tableData[this.carbon_tableData.length-1].sn+1),this.carbon_tableData.push({sn:e,actual_weight:0,standard_error:0,material_name:""})},insertOilEnbale:function(){var e=this;return this.oil_tableData.some((function(t){return t.sn===e.oilSnForInsert}))},insertBeforeSnOneOil:function(){for(var e=this,t=this.oil_tableData.find((function(t){return t.sn===e.oilSnForInsert})),i=this.oil_tableData.indexOf(t),a=i;a<this.oil_tableData.length;++a)this.oil_tableData[a].sn+=1;this.oil_tableData.splice(i,0,{sn:this.oilSnForInsert,actual_weight:0,standard_error:0,material_name:""})},insertOneOil:function(){var e=this.oil_tableData.length+1;this.oil_tableData[this.oil_tableData.length-1]&&(e=this.oil_tableData[this.oil_tableData.length-1].sn+1),this.oil_tableData.push({sn:e,actual_weight:0,standard_error:0,material_name:""})},removeRubberRow:function(e){this.rubber_tableData.splice(this.rubber_tableData.indexOf(e),1)},selectMaterial:function(e){this.rubberRow=e,this.dialogRawMaterialSync=!0,this.raw_material_list()},equip_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["d"])("get",{params:{category_name:"密炼设备"}});case 3:i=t.sent,0!==i.results.length&&(e.SelectEquipOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},site_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["l"])("get",{params:{}});case 3:i=t.sent,0!==i.results.length&&(e.SelectSiteOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},recipe_no_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["j"])("get",{params:{}});case 3:i=t.sent,0!==i.results.length&&(e.SelectRecipeNoOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},stage_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["m"])("get",{params:{}});case 3:i=t.sent,0!==i.results.length&&(e.SelectStageOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},dev_type_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["c"])("get",{params:{}});case 3:i=t.sent,e.RubberStageOptions=i.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},global_SITE_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["e"])("get",{params:{}});case 3:i=t.sent,0!==i.results.length&&(e.SelectSITEOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},condition_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["b"])("get",{params:{}});case 3:i=t.sent,e.SelectConditionOptions=i.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},action_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])("get",{params:{}});case 3:i=t.sent,e.SelectActionOptions=i.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},raw_material_list:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a,r,n,l,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,i.prev=1,r=t.materialType?t.materialType:"",n=t.search_material_no?t.search_material_no:"",l=t.search_material_name?t.search_material_name:"",i.next=7,Object(s["g"])("get",null,{params:{page:a,material_type_id:r,material_no:n,material_name:l,use_flag:!0}});case 7:o=i.sent,t.tableData=o.results,t.tableDataTotal=o.count,i.next=15;break;case 12:throw i.prev=12,i.t0=i["catch"](1),new Error(i.t0);case 15:case"end":return i.stop()}}),i,null,[[1,12]])})))()},material_type_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["f"])("get",{params:{}});case 3:i=t.sent,0!==i.results.length&&(e.materialTypeOptions=i.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},post_recipe_list:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(s["i"])("post",null,e);case 3:return a=i.sent,i.abrupt("return",a);case 7:throw i.prev=7,i.t0=i["catch"](0),t.select_recipe_component=!1,t.equip=null,t.stage_product_batch_no=null,new Error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,7]])})))()},post_recipe_info_step_list:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["k"])("post",null,e);case 3:i=t.sent,console.log(i),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},SelectEquipDisplay:function(e){e&&this.equip_list()},SelectSiteDisplay:function(e){e&&this.site_list()},SelectGlobalSITEDisplay:function(e){e&&this.global_SITE_list()},SelectRecipeNoDisplay:function(e){e&&this.recipe_no_list()},SelectStageDisplay:function(e){e&&this.stage_list()},SelectConditionDisplay:function(e){e&&this.condition_list()},SelectActionDisplay:function(e){e&&this.action_list()},materialTypeDisplay:function(e){e&&this.material_type_list()},SelectEquipChange:function(){var e=this;this.rubber_tableData=[],this.carbon_tableData=[],this.oil_tableData=[];for(var t=0;t<this.SelectEquipOptions.length;t++)this.generateRecipeForm["SelectEquip"]===this.SelectEquipOptions[t]["id"]&&(this.category__category_name=this.SelectEquipOptions[t]["category__category_name"],Object(s["n"])(this.SelectEquipOptions[t].equip_no,1).then((function(t){e.tankCarbons=t.results,e.tankCarbons=e.tankCarbons.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{label:"".concat(e.tank_name,"  ").concat(e.material_name)})}))})),Object(s["n"])(this.SelectEquipOptions[t].equip_no,2).then((function(t){e.tankOils=t.results,e.tankOils=e.tankOils.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{label:"".concat(e.tank_name,"  ").concat(e.material_name)})}))})));for(var i=0;i<this.SelectEquipOptions.length;++i)this.SelectEquipOptions[i]["id"]===this.generateRecipeForm["SelectEquip"]&&(this.equip=this.SelectEquipOptions[i]["equip_name"])},pagehandleCurrentChange:function(e){this.currentRow=e,this.raw_material_list(e)},handleMaterialSelect:function(e){if(this.rubberRow){if("炭黑"===e.material_type_name||"油料"===e.material_type_name)return void this.$message("非法选择");this.$set(this.rubberRow,"material_name",e.material_name),this.rubberRow.material=e.id,this.dialogRawMaterialSync=!1}else{var t=this;t.ProductRecipe[t.raw_material_index].material_name=e.material_name,t.ProductRecipe[t.raw_material_index].material=e.id,t.ProductRecipe[t.raw_material_index].material_type=e.material_type_name,t.dialogRawMaterialSync=!1}},saveMaterialClicked:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.batching_details_list=[],t=0;case 2:if(!(t<this.ProductRecipe.length)){e.next=13;break}if(!this.ProductRecipe[t].material_name){e.next=8;break}i={sn:t+1,auto_flag:0,material:this.ProductRecipe[t].material,actual_weight:this.ProductRecipe[t].actual_weight.toFixed(2),standard_error:this.ProductRecipe[t].standard_error.toFixed(2),material_name:this.ProductRecipe[t].material_name,material_type:this.ProductRecipe[t].material_type},this.batching_details_list.push(i),e.next=10;break;case 8:return this.$message({message:"必填字段不能为空",type:"error"}),e.abrupt("return");case 10:++t,e.next=2;break;case 13:for(this.rubber_tableData=[],this.carbon_tableData=[],this.oil_tableData=[],this.select_recipe_component=!0,this.dialogRubberMaterialStandard=!1,a=0;a<this.batching_details_list.length;++a)r="",r=1===this.batching_details_list[a]["auto_flag"]?"自动":2===this.batching_details_list[a]["auto_flag"]?"手动":"其他","炭黑"===this.batching_details_list[a]["material_type"]?this.carbon_tableData.push({sn:this.carbon_tableData.length+1,auto_flag:r,material_name:this.batching_details_list[a]["material_name"],actual_weight:this.batching_details_list[a]["actual_weight"],standard_error:this.batching_details_list[a]["standard_error"]}):"油料"===this.batching_details_list[a]["material_type"]?this.oil_tableData.push({sn:this.oil_tableData.length+1,action_name:"投料",auto_flag:r,material_name:this.batching_details_list[a]["material_name"],actual_weight:this.batching_details_list[a]["actual_weight"],standard_error:this.batching_details_list[a]["standard_error"]}):this.rubber_tableData.push({sn:this.rubber_tableData.length+1,action_name:"投料",auto_flag:r,material_name:this.batching_details_list[a]["material_name"],actual_weight:this.batching_details_list[a]["actual_weight"],standard_error:this.batching_details_list[a]["standard_error"]});case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateRecipeName:function(){for(var e="",t="",i="",a=0;a<this.SelectSITEOptions.length;++a)this.SelectSITEOptions[a]["id"]===this.generateRecipeForm["SelectSITE"]&&(e=this.SelectSITEOptions[a]["global_name"]);for(var r=0;r<this.SelectStageOptions.length;++r)this.SelectStageOptions[r]["id"]===this.generateRecipeForm["SelectStage"]&&(t=this.SelectStageOptions[r]["global_name"]);for(var n=0;n<this.SelectRecipeNoOptions.length;++n)this.SelectRecipeNoOptions[n]["id"]===this.generateRecipeForm["SelectRecipeNo"]&&(i=this.SelectRecipeNoOptions[n]["product_no"]);this.stage_product_batch_no=e+"-"+t+"-"+i+"-"+this.generateRecipeForm["version"],this.generateRecipeForm.stage_product_batch_no=this.stage_product_batch_no},generateRecipeButton:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;for(var i=0;i<t.SelectEquipOptions.length;++i)t.SelectEquipOptions[i]["id"]===t.generateRecipeForm["SelectEquip"]&&(t.equip=t.SelectEquipOptions[i]["equip_name"]);for(var a="",r="",n="",l=0;l<t.SelectSITEOptions.length;++l)t.SelectSITEOptions[l]["id"]===t.generateRecipeForm["SelectSITE"]&&(a=t.SelectSITEOptions[l]["global_name"]);for(var s=0;s<t.SelectStageOptions.length;++s)t.SelectStageOptions[s]["id"]===t.generateRecipeForm["SelectStage"]&&(r=t.SelectStageOptions[s]["global_name"]);for(var o=0;o<t.SelectRecipeNoOptions.length;++o)t.SelectRecipeNoOptions[o]["id"]===t.generateRecipeForm["SelectRecipeNo"]&&(n=t.SelectRecipeNoOptions[o]["product_no"]);t.stage_product_batch_no=a+"-"+r+"-"+n+"-"+t.generateRecipeForm["version"]}))},showRubberMaterialStandard:function(){this.raw_material_list(),this.dialogRubberMaterialStandard=!0;for(var e=0;e<this.SelectEquipOptions.length;++e)this.SelectEquipOptions[e]["id"]===this.generateRecipeForm["SelectEquip"]&&(this.equip=this.SelectEquipOptions[e]["equip_name"]);for(var t="",i="",a="",r=0;r<this.SelectSITEOptions.length;++r)this.SelectSITEOptions[r]["id"]===this.generateRecipeForm["SelectSITE"]&&(t=this.SelectSITEOptions[r]["global_name"]);for(var n=0;n<this.SelectStageOptions.length;++n)this.SelectStageOptions[n]["id"]===this.generateRecipeForm["SelectStage"]&&(i=this.SelectStageOptions[n]["global_name"]);for(var l=0;l<this.SelectRecipeNoOptions.length;++l)this.SelectRecipeNoOptions[l]["id"]===this.generateRecipeForm["SelectRecipeNo"]&&(a=this.SelectRecipeNoOptions[l]["product_no"]);this.stage_product_batch_no=t+"-"+i+"-"+a+"-"+this.generateRecipeForm["version"]},receipeTypeChange:function(){if(!this.normalReceipe){var e=this.generateRecipeForm.SelectEquip;this.$refs["generateRecipeForm"].resetFields(),this.generateRecipeForm.SelectEquip=e}this.stage_product_batch_no=""},generateMaterialButton:function(e){var t=this;this.normalReceipe?this.$refs[e].validate((function(e){if(!e)return!1;t.showRubberMaterialStandard()})):this.$refs[e].validateField("SelectEquip",(function(e){if(e)return console.log("error submit!!"),!1;t.raw_material_list(),t.dialogRubberMaterialStandard=!0;for(var i=0;i<t.SelectEquipOptions.length;++i)t.SelectEquipOptions[i]["id"]===t.generateRecipeForm["SelectEquip"]&&(t.equip=t.SelectEquipOptions[i]["equip_name"])}))},materialTypeChange:function(){this.raw_material_list()},search_material_no_Change:function(){this.raw_material_list()},search_material_name_Change:function(){this.raw_material_list()},insert_material_changed:function(){this.ProductRecipe.push({material:"",material_type:"",auto_flag:0,material_name:"",actual_weight:null,standard_error:null})},del_material_row:function(e,t){this.ProductRecipe.splice(t,1)},insertRecipeStepEnbale:function(){var e=this;return this.RecipeMaterialList.some((function(t){return t.sn===e.recipeStepSnForInsert}))},insert_before_sn_recipe_step:function(){for(var e=this,t=this.RecipeMaterialList.find((function(t){return t.sn===e.recipeStepSnForInsert})),i=this.RecipeMaterialList.indexOf(t),a=i;a<this.RecipeMaterialList.length;++a)this.RecipeMaterialList[a].sn+=1;this.RecipeMaterialList.splice(i,0,{sn:this.recipeStepSnForInsert,time:void 0,temperature:void 0,energy:void 0,power:void 0,pressure:void 0,rpm:void 0})},insert_recipe_step:function(){var e=this.RecipeMaterialList[this.RecipeMaterialList.length-1]?this.RecipeMaterialList[this.RecipeMaterialList.length-1].sn+1:1;this.RecipeMaterialList.push({sn:e,time:void 0,temperature:void 0,energy:void 0,power:void 0,pressure:void 0,rpm:void 0})},del_recipe_step_row:function(e,t){this.RecipeMaterialList.splice(t,1)},pop_up_raw_material:function(e,t){this.raw_material_index=t,this.dialogRawMaterialSync=!0},postRecipeList:function(){var e=this;if(this.sp_num){for(var t=[],i=0;i<this.rubber_tableData.length;++i)if(this.rubber_tableData[i].material){var a={sn:this.rubber_tableData[i].sn,auto_flag:0,material:this.rubber_tableData[i].material,actual_weight:this.rubber_tableData[i].actual_weight?this.rubber_tableData[i].actual_weight:0,standard_error:this.rubber_tableData[i].standard_error,type:1};t.push(a)}for(i=0;i<this.carbon_tableData.length;++i)if(this.carbon_tableData[i].material){var r={sn:this.carbon_tableData[i].sn,auto_flag:0,material:this.carbon_tableData[i].material,actual_weight:this.carbon_tableData[i].actual_weight?this.carbon_tableData[i].actual_weight:0,standard_error:this.carbon_tableData[i].standard_error,tank_no:this.carbon_tableData[i].tank_no,type:2};t.push(r)}for(i=0;i<this.oil_tableData.length;++i)if(this.oil_tableData[i].material){var n={sn:this.oil_tableData[i].sn,auto_flag:0,material:this.oil_tableData[i].material,actual_weight:this.oil_tableData[i].actual_weight?this.oil_tableData[i].actual_weight:0,standard_error:this.oil_tableData[i].standard_error,tank_no:this.oil_tableData[i].tank_no,type:3};t.push(n)}var l=[];if(0===this.RecipeMaterialList.length)return void this.$message({message:"密炼步序不能为空",type:"error"});for(var o=0;o<this.RecipeMaterialList.length;++o){if(!this.RecipeMaterialList[o].action)return void this.$message({message:"密炼步序动作字段不能为空",type:"error"});var c={sn:o+1,condition:this.RecipeMaterialList[o].condition,time:void 0===this.RecipeMaterialList[o].time?0:this.RecipeMaterialList[o].time,temperature:void 0===this.RecipeMaterialList[o].temperature?0:this.RecipeMaterialList[o].temperature,energy:void 0===this.RecipeMaterialList[o].energy?0:this.RecipeMaterialList[o].energy,power:void 0===this.RecipeMaterialList[o].power?0:this.RecipeMaterialList[o].power,action:this.RecipeMaterialList[o].action,pressure:void 0===this.RecipeMaterialList[o].pressure?0:this.RecipeMaterialList[o].pressure,rpm:void 0===this.RecipeMaterialList[o].rpm?0:this.RecipeMaterialList[o].rpm};l.push(c)}Object(s["i"])("post",null,{data:{factory:this.generateRecipeForm["SelectSite"],site:this.normalReceipe?this.generateRecipeForm["SelectSITE"]:null,product_info:this.normalReceipe?this.generateRecipeForm["SelectRecipeNo"]:null,precept:this.generateRecipeForm["scheme"],stage_product_batch_no:this.normalReceipe?null:this.stage_product_batch_no,stage:this.normalReceipe?this.generateRecipeForm["SelectStage"]:null,versions:this.normalReceipe?this.generateRecipeForm["version"]:null,production_time_interval:this.production_time_interval,batching_details:t,equip:this.generateRecipeForm["SelectEquip"],process_details:l,processes:{mini_time:void 0===this.mini_time?0:this.mini_time,mini_temp:void 0===this.mini_temp?0:this.mini_temp,over_temp:void 0===this.over_temp?0:this.over_temp,batching_error:void 0===this.batching_error?0:this.batching_error,zz_temp:void 0===this.zz_temp?0:this.zz_temp,xlm_temp:void 0===this.xlm_temp?0:this.xlm_temp,cb_temp:void 0===this.cb_temp?0:this.cb_temp,over_time:void 0===this.over_time?0:this.over_time,max_temp:void 0===this.max_temp?0:this.max_temp,reuse_time:void 0===this.reuse_time?0:this.reuse_time,reuse_flag:this.reuse_flag,temp_use_flag:this.temp_use_flag,sp_num:this.sp_num,use_flag:this.use_flag,equip:this.generateRecipeForm["SelectEquip"],product_batching:this.product_batching}}}).then((function(t){e.$message({message:e.stage_product_batch_no+"配方步序添加成功",type:"success"}),e.$router.push({name:"RecipeList"})}))}else this.$message({message:"收皮信息不能为空",type:"error"})},AddRecipeInfoStep:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.normalReceipe?this.$refs["generateRecipeForm"].validate((function(e){if(!e)return!1;i.postRecipeList()})):(t=0,this.$refs["generateRecipeForm"].validateField(["SelectEquip","stage_product_batch_no"],(function(e){if(e)return!1;t++,2===t&&i.postRecipeList()})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),recipe_return_list:function(){this.$router.push({name:"RecipeList"})},materialChange:function(e,t,i,a){var r=i[e];this.$set(a[t],"tank_no",r.tank_no),this.$set(a[t],"provenance",r.provenance),this.$set(a[t],"material",r.id)}}},c=o,u=(i("2cc9"),i("2877")),p=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=p.exports}}]);